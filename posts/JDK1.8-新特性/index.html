<!DOCTYPE html><html lang="zh-CN" ><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><meta name="prefer-datetime-locale" content="Asia/Hangzhou"><meta name="generator" content="Jekyll v4.2.2" /><meta property="og:title" content="JDK1.8 新特性" /><meta name="author" content="杨圣僧" /><meta property="og:locale" content="zh_CN" /><meta name="description" content="本博客是通过Chirpy主题配置而成的。" /><meta property="og:description" content="本博客是通过Chirpy主题配置而成的。" /><link rel="canonical" href="https://ysh8023.github.io/posts/JDK1.8-%E6%96%B0%E7%89%B9%E6%80%A7/" /><meta property="og:url" content="https://ysh8023.github.io/posts/JDK1.8-%E6%96%B0%E7%89%B9%E6%80%A7/" /><meta property="og:site_name" content="杨圣僧" /><meta property="og:type" content="article" /><meta property="article:published_time" content="2022-08-29T02:34:00+00:00" /><meta name="twitter:card" content="summary" /><meta property="twitter:title" content="JDK1.8 新特性" /><meta name="twitter:site" content="@twitter_username" /><meta name="twitter:creator" content="@杨圣僧" /> <script type="application/ld+json"> {"@context":"https://schema.org","@type":"BlogPosting","author":{"@type":"Person","name":"杨圣僧"},"dateModified":"2022-08-30T09:29:35+00:00","datePublished":"2022-08-29T02:34:00+00:00","description":"本博客是通过Chirpy主题配置而成的。","headline":"JDK1.8 新特性","mainEntityOfPage":{"@type":"WebPage","@id":"https://ysh8023.github.io/posts/JDK1.8-%E6%96%B0%E7%89%B9%E6%80%A7/"},"url":"https://ysh8023.github.io/posts/JDK1.8-%E6%96%B0%E7%89%B9%E6%80%A7/"}</script><title>JDK1.8 新特性 | 杨圣僧</title><link rel="apple-touch-icon" sizes="180x180" href="/assets/img/favicons/apple-touch-icon.png"><link rel="icon" type="image/png" sizes="32x32" href="/assets/img/favicons/favicon-32x32.png"><link rel="icon" type="image/png" sizes="16x16" href="/assets/img/favicons/favicon-16x16.png"><link rel="manifest" href="/assets/img/favicons/site.webmanifest"><link rel="shortcut icon" href="/assets/img/favicons/favicon.ico"><meta name="apple-mobile-web-app-title" content="杨圣僧"><meta name="application-name" content="杨圣僧"><meta name="msapplication-TileColor" content="#da532c"><meta name="msapplication-config" content="/assets/img/favicons/browserconfig.xml"><meta name="theme-color" content="#ffffff"><link rel="preconnect" href="https://fonts.googleapis.com" ><link rel="dns-prefetch" href="https://fonts.googleapis.com" ><link rel="preconnect" href="https://fonts.gstatic.com" crossorigin><link rel="dns-prefetch" href="https://fonts.gstatic.com" crossorigin><link rel="preconnect" href="https://fonts.googleapis.com" ><link rel="dns-prefetch" href="https://fonts.googleapis.com" ><link rel="preconnect" href="https://cdn.jsdelivr.net" ><link rel="dns-prefetch" href="https://cdn.jsdelivr.net" ><link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Lato&family=Source+Sans+Pro:wght@400;600;700;900&display=swap"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4/dist/css/bootstrap.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@5.11.2/css/all.min.css"><link rel="stylesheet" href="/assets/css/style.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/afeld/bootstrap-toc@1.0.1/dist/bootstrap-toc.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/magnific-popup@1/dist/magnific-popup.min.css"> <script src="https://cdn.jsdelivr.net/npm/jquery@3/dist/jquery.min.js"></script> <script type="text/javascript"> class ModeToggle { static get MODE_KEY() { return "mode"; } static get MODE_ATTR() { return "data-mode"; } static get DARK_MODE() { return "dark"; } static get LIGHT_MODE() { return "light"; } static get ID() { return "mode-toggle"; } constructor() { if (this.hasMode) { if (this.isDarkMode) { if (!this.isSysDarkPrefer) { this.setDark(); } } else { if (this.isSysDarkPrefer) { this.setLight(); } } } let self = this; /* always follow the system prefers */ this.sysDarkPrefers.addEventListener("change", () => { if (self.hasMode) { if (self.isDarkMode) { if (!self.isSysDarkPrefer) { self.setDark(); } } else { if (self.isSysDarkPrefer) { self.setLight(); } } self.clearMode(); } self.notify(); }); } /* constructor() */ get sysDarkPrefers() { return window.matchMedia("(prefers-color-scheme: dark)"); } get isSysDarkPrefer() { return this.sysDarkPrefers.matches; } get isDarkMode() { return this.mode === ModeToggle.DARK_MODE; } get isLightMode() { return this.mode === ModeToggle.LIGHT_MODE; } get hasMode() { return this.mode != null; } get mode() { return sessionStorage.getItem(ModeToggle.MODE_KEY); } /* get the current mode on screen */ get modeStatus() { if (this.isDarkMode || (!this.hasMode && this.isSysDarkPrefer)) { return ModeToggle.DARK_MODE; } else { return ModeToggle.LIGHT_MODE; } } setDark() { $('html').attr(ModeToggle.MODE_ATTR, ModeToggle.DARK_MODE); sessionStorage.setItem(ModeToggle.MODE_KEY, ModeToggle.DARK_MODE); } setLight() { $('html').attr(ModeToggle.MODE_ATTR, ModeToggle.LIGHT_MODE); sessionStorage.setItem(ModeToggle.MODE_KEY, ModeToggle.LIGHT_MODE); } clearMode() { $('html').removeAttr(ModeToggle.MODE_ATTR); sessionStorage.removeItem(ModeToggle.MODE_KEY); } /* Notify another plugins that the theme mode has changed */ notify() { window.postMessage({ direction: ModeToggle.ID, message: this.modeStatus }, "*"); } } /* ModeToggle */ const toggle = new ModeToggle(); function flipMode() { if (toggle.hasMode) { if (toggle.isSysDarkPrefer) { if (toggle.isLightMode) { toggle.clearMode(); } else { toggle.setLight(); } } else { if (toggle.isDarkMode) { toggle.clearMode(); } else { toggle.setDark(); } } } else { if (toggle.isSysDarkPrefer) { toggle.setLight(); } else { toggle.setDark(); } } toggle.notify(); } /* flipMode() */ </script><body data-spy="scroll" data-target="#toc" data-topbar-visible="true"><div id="sidebar" class="d-flex flex-column align-items-end"><div class="profile-wrapper text-center"><div id="avatar"> <a href="/" class="mx-auto"> <img src="/assets/config/avatar.jpg" alt="avatar" onerror="this.style.display='none'"> </a></div><div class="site-title mt-3"> <a href="/">杨圣僧</a></div><div class="site-subtitle font-italic">这里是杨圣僧的博客～</div></div><ul class="w-100"><li class="nav-item"> <a href="/" class="nav-link"> <i class="fa-fw fas fa-home ml-xl-3 mr-xl-3 unloaded"></i> <span>首页</span> </a><li class="nav-item"> <a href="/categories/" class="nav-link"> <i class="fa-fw fas fa-stream ml-xl-3 mr-xl-3 unloaded"></i> <span>分类</span> </a><li class="nav-item"> <a href="/tags/" class="nav-link"> <i class="fa-fw fas fa-tags ml-xl-3 mr-xl-3 unloaded"></i> <span>标签</span> </a><li class="nav-item"> <a href="/archives/" class="nav-link"> <i class="fa-fw fas fa-archive ml-xl-3 mr-xl-3 unloaded"></i> <span>归档</span> </a><li class="nav-item"> <a href="/about/" class="nav-link"> <i class="fa-fw fas fa-info ml-xl-3 mr-xl-3 unloaded"></i> <span>关于</span> </a></ul><div class="sidebar-bottom mt-auto d-flex flex-wrap justify-content-center align-items-center"> <button class="mode-toggle btn" aria-label="Switch Mode"> <i class="fas fa-adjust"></i> </button> <span class="icon-border"></span> <a href="https://github.com/Ysh8023" aria-label="github" target="_blank" rel="noopener"> <i class="fab fa-github"></i> </a> <a href="https://twitter.com/twitter_username" aria-label="twitter" target="_blank" rel="noopener"> <i class="fab fa-twitter"></i> </a> <a href=" javascript:location.href = 'mailto:' + ['1016797247','qq.com'].join('@')" aria-label="email" > <i class="fas fa-envelope"></i> </a> <a href="/feed.xml" aria-label="rss" > <i class="fas fa-rss"></i> </a></div></div><div id="topbar-wrapper"><div id="topbar" class="container d-flex align-items-center justify-content-between h-100 pl-3 pr-3 pl-md-4 pr-md-4"> <span id="breadcrumb"> <span> <a href="/"> 首页 </a> </span> <span>JDK1.8 新特性</span> </span> <i id="sidebar-trigger" class="fas fa-bars fa-fw"></i><div id="topbar-title"> 文章</div><i id="search-trigger" class="fas fa-search fa-fw"></i> <span id="search-wrapper" class="align-items-center"> <i class="fas fa-search fa-fw"></i> <input class="form-control" id="search-input" type="search" aria-label="search" autocomplete="off" placeholder="搜索..."> </span> <span id="search-cancel" >取消</span></div></div><div id="main-wrapper" class="d-flex justify-content-center"><div id="main" class="container pl-xl-4 pr-xl-4"><div class="row"><div id="core-wrapper" class="col-12 col-lg-11 col-xl-9 pr-xl-4"><div class="post pl-1 pr-1 pl-md-2 pr-md-2"><h1 data-toc-skip>JDK1.8 新特性</h1><div class="post-meta text-muted"> <span> 发表于 <em class="" data-ts="1661740440" data-df="YYYY-MM-DD" data-toggle="tooltip" data-placement="bottom"> 2022-08-29 </em> </span> <span> 更新于 <em class="" data-ts="1661851775" data-df="YYYY-MM-DD" data-toggle="tooltip" data-placement="bottom"> 2022-08-30 </em> </span><div class="d-flex justify-content-between"> <span> 作者 <em> 杨圣僧 </em> </span><div> <span class="readtime" data-toggle="tooltip" data-placement="bottom" title="6078 字"> <em>33 分钟</em>阅读</span></div></div></div><div class="post-content"><p><img data-src="/assets/blog_res/yiqunmeinv.jpg" alt="yiqunmeinv" data-proofer-ignore></p><h1 id="jdk18-新特性">JDK1.8 新特性</h1><p>本文主要介绍了JDK1.8版本中的一些新特性，乃作者学习JAVA后笔记，仅供参考。</p><p>jdk1.8新特性知识点：</p><ul><li><strong>Lambda表达式</strong><li><strong>函数式接口</strong><li><strong>*方法引用和构造器调用</strong><li><strong>Stream API</strong><li><strong>接口中的默认方法和静态方法</strong><li><strong>新时间日期API</strong></ul><blockquote><p>在jdk1.8中对hashMap等map<a href="https://so.csdn.net/so/search?q=集合&amp;spm=1001.2101.3001.7020">集合</a>的数据结构优化。hashMap数据结构的优化 原来的hashMap采用的<a href="https://so.csdn.net/so/search?q=数据结构&amp;spm=1001.2101.3001.7020">数据结构</a>是哈希表（数组+链表），hashMap默认大小是16，一个0-15索引的数组，如何往里面存储元素，首先调用元素的hashcode 方法，计算出哈希码值，经过哈希算法算成数组的索引值，如果对应的索引处没有元素，直接存放，如果有对象在，那么比较它们的equals方法比较内容 如果内容一样，后一个value会将前一个value的值覆盖，如果不一样，在1.7的时候，后加的放在前面，形成一个链表，形成了碰撞，在某些情况下如果链表 无限下去，那么效率极低，碰撞是避免不了的 加载因子：0.75，数组扩容，达到总容量的75%，就进行扩容，但是无法避免碰撞的情况发生 在1.8之后，在数组+链表+红黑树来实现hashmap，当碰撞的元素个数大于8时 &amp; 总容量大于64，会有红黑树的引入 除了添加之后，效率都比链表高，1.8之后链表新进元素加到末尾 ConcurrentHashMap (锁分段机制)，concurrentLevel,jdk1.8采用CAS算法(无锁算法，不再使用锁分段)，数组+链表中也引入了红黑树的使用</p></blockquote><h2 id="lambda表达式"><span class="mr-2"><a href="https://so.csdn.net/so/search?q=Lambda&amp;spm=1001.2101.3001.7020"><span class="mr-2">Lambda</a>表达式</span><a href="#lambda表达式" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h2><blockquote><p>lambda<a href="https://so.csdn.net/so/search?q=表达式&amp;spm=1001.2101.3001.7020">表达式</a>本质上是一段匿名内部类，也可以是一段可以传递的代码</p></blockquote><p>先来体验一下lambda最直观的优点：简洁代码</p><div class="language-java highlighter-rouge"><div class="code-header"> <span data-label-text="Java"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="已复制！"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
</pre><td class="rouge-code"><pre>  <span class="c1">//匿名内部类</span>
  <span class="nc">Comparator</span><span class="o">&lt;</span><span class="nc">Integer</span><span class="o">&gt;</span> <span class="n">cpt</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">Comparator</span><span class="o">&lt;</span><span class="nc">Integer</span><span class="o">&gt;()</span> <span class="o">{</span>
      <span class="nd">@Override</span>
      <span class="kd">public</span> <span class="kt">int</span> <span class="nf">compare</span><span class="o">(</span><span class="nc">Integer</span> <span class="n">o1</span><span class="o">,</span> <span class="nc">Integer</span> <span class="n">o2</span><span class="o">)</span> <span class="o">{</span>
          <span class="k">return</span> <span class="nc">Integer</span><span class="o">.</span><span class="na">compare</span><span class="o">(</span><span class="n">o1</span><span class="o">,</span><span class="n">o2</span><span class="o">);</span>
      <span class="o">}</span>
  <span class="o">};</span>

  <span class="nc">TreeSet</span><span class="o">&lt;</span><span class="nc">Integer</span><span class="o">&gt;</span> <span class="n">set</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">TreeSet</span><span class="o">&lt;&gt;(</span><span class="n">cpt</span><span class="o">);</span>

  <span class="nc">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">"========================="</span><span class="o">);</span>

  <span class="c1">//使用lambda表达式</span>
  <span class="nc">Comparator</span><span class="o">&lt;</span><span class="nc">Integer</span><span class="o">&gt;</span> <span class="n">cpt2</span> <span class="o">=</span> <span class="o">(</span><span class="n">x</span><span class="o">,</span><span class="n">y</span><span class="o">)</span> <span class="o">-&gt;</span> <span class="nc">Integer</span><span class="o">.</span><span class="na">compare</span><span class="o">(</span><span class="n">x</span><span class="o">,</span><span class="n">y</span><span class="o">);</span>
  <span class="nc">TreeSet</span><span class="o">&lt;</span><span class="nc">Integer</span><span class="o">&gt;</span> <span class="n">set2</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">TreeSet</span><span class="o">&lt;&gt;(</span><span class="n">cpt2</span><span class="o">);</span>
</pre></table></code></div></div><p>只需要一行代码，极大减少代码量！！</p><p>这样一个场景，在商城浏览商品信息时，经常会有条件的进行筛选浏览，例如要选颜色为红色的、价格小于8000千的….</p><div class="language-java highlighter-rouge"><div class="code-header"> <span data-label-text="Java"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="已复制！"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
</pre><td class="rouge-code"><pre><span class="c1">// 筛选颜色为红色</span>
<span class="kd">public</span>  <span class="nc">List</span><span class="o">&lt;</span><span class="nc">Product</span><span class="o">&gt;</span> <span class="nf">filterProductByColor</span><span class="o">(</span><span class="nc">List</span><span class="o">&lt;</span><span class="nc">Product</span><span class="o">&gt;</span> <span class="n">list</span><span class="o">){</span>
    <span class="nc">List</span><span class="o">&lt;</span><span class="nc">Product</span><span class="o">&gt;</span> <span class="n">prods</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">ArrayList</span><span class="o">&lt;&gt;();</span>
    <span class="k">for</span> <span class="o">(</span><span class="nc">Product</span> <span class="n">product</span> <span class="o">:</span> <span class="n">list</span><span class="o">){</span>
        <span class="k">if</span> <span class="o">(</span><span class="s">"红色"</span><span class="o">.</span><span class="na">equals</span><span class="o">(</span><span class="n">product</span><span class="o">.</span><span class="na">getColor</span><span class="o">())){</span>
            <span class="n">prods</span><span class="o">.</span><span class="na">add</span><span class="o">(</span><span class="n">product</span><span class="o">);</span>
        <span class="o">}</span>
    <span class="o">}</span>
    <span class="k">return</span> <span class="n">prods</span><span class="o">;</span>
 <span class="o">}</span>

<span class="c1">// 筛选价格小于8千的</span>
<span class="kd">public</span>  <span class="nc">List</span><span class="o">&lt;</span><span class="nc">Product</span><span class="o">&gt;</span> <span class="nf">filterProductByPrice</span><span class="o">(</span><span class="nc">List</span><span class="o">&lt;</span><span class="nc">Product</span><span class="o">&gt;</span> <span class="n">list</span><span class="o">){</span>
    <span class="nc">List</span><span class="o">&lt;</span><span class="nc">Product</span><span class="o">&gt;</span> <span class="n">prods</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">ArrayList</span><span class="o">&lt;&gt;();</span>
    <span class="k">for</span> <span class="o">(</span><span class="nc">Product</span> <span class="n">product</span> <span class="o">:</span> <span class="n">list</span><span class="o">){</span>
        <span class="k">if</span> <span class="o">(</span><span class="n">product</span><span class="o">.</span><span class="na">getPrice</span><span class="o">()</span> <span class="o">&lt;</span> <span class="mi">8000</span><span class="o">){</span>
            <span class="n">prods</span><span class="o">.</span><span class="na">add</span><span class="o">(</span><span class="n">product</span><span class="o">);</span>
        <span class="o">}</span>
    <span class="o">}</span>
    <span class="k">return</span> <span class="n">prods</span><span class="o">;</span>
 <span class="o">}</span>
</pre></table></code></div></div><p>我们发现实际上这些过滤方法的核心就只有if语句中的条件判断，其他均为模版代码，每次变更一下需求，都需要新增一个方法，然后复制黏贴，假设这个过滤方法有几百行，那么这样的做法难免笨拙了一点。如何进行优化呢？</p><p>优化一：使用设计模式</p><p>定义一个MyPredicate接口</p><div class="language-java highlighter-rouge"><div class="code-header"> <span data-label-text="Java"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="已复制！"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
</pre><td class="rouge-code"><pre><span class="kd">public</span> <span class="kd">interface</span> <span class="nc">MyPredicate</span> <span class="o">&lt;</span><span class="no">T</span><span class="o">&gt;</span> <span class="o">{</span>
    <span class="kt">boolean</span> <span class="nf">test</span><span class="o">(</span><span class="no">T</span> <span class="n">t</span><span class="o">);</span>
<span class="o">}</span>
</pre></table></code></div></div><p>如果想要筛选颜色为红色的商品，定义一个颜色过滤类</p><div class="language-java highlighter-rouge"><div class="code-header"> <span data-label-text="Java"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="已复制！"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
</pre><td class="rouge-code"><pre><span class="kd">public</span> <span class="kd">class</span> <span class="nc">ColorPredicate</span> <span class="kd">implements</span> <span class="nc">MyPredicate</span> <span class="o">&lt;</span><span class="nc">Product</span><span class="o">&gt;</span> <span class="o">{</span>

     <span class="kd">private</span> <span class="kd">static</span> <span class="kd">final</span> <span class="nc">String</span> <span class="no">RED</span> <span class="o">=</span> <span class="s">"红色"</span><span class="o">;</span>

     <span class="nd">@Override</span>
     <span class="kd">public</span> <span class="kt">boolean</span> <span class="nf">test</span><span class="o">(</span><span class="nc">Product</span> <span class="n">product</span><span class="o">)</span> <span class="o">{</span>
         <span class="k">return</span> <span class="no">RED</span><span class="o">.</span><span class="na">equals</span><span class="o">(</span><span class="n">product</span><span class="o">.</span><span class="na">getColor</span><span class="o">());</span>
     <span class="o">}</span>
</pre></table></code></div></div><p>定义过滤方法，将过滤接口当做参数传入，这样这个过滤方法就不用修改，在实际调用的时候将具体的实现类传入即可。</p><div class="language-java highlighter-rouge"><div class="code-header"> <span data-label-text="Java"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="已复制！"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
</pre><td class="rouge-code"><pre><span class="kd">public</span> <span class="nc">List</span><span class="o">&lt;</span><span class="nc">Product</span><span class="o">&gt;</span> <span class="nf">filterProductByPredicate</span><span class="o">(</span><span class="nc">List</span><span class="o">&lt;</span><span class="nc">Product</span><span class="o">&gt;</span> <span class="n">list</span><span class="o">,</span><span class="nc">MyPredicate</span><span class="o">&lt;</span><span class="nc">Product</span><span class="o">&gt;</span> <span class="n">mp</span><span class="o">){</span>
        <span class="nc">List</span><span class="o">&lt;</span><span class="nc">Product</span><span class="o">&gt;</span> <span class="n">prods</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">ArrayList</span><span class="o">&lt;&gt;();</span>
        <span class="k">for</span> <span class="o">(</span><span class="nc">Product</span> <span class="n">prod</span> <span class="o">:</span> <span class="n">list</span><span class="o">){</span>
            <span class="k">if</span> <span class="o">(</span><span class="n">mp</span><span class="o">.</span><span class="na">test</span><span class="o">(</span><span class="n">prod</span><span class="o">)){</span>
                <span class="n">prods</span><span class="o">.</span><span class="na">add</span><span class="o">(</span><span class="n">prod</span><span class="o">);</span>
            <span class="o">}</span>
        <span class="o">}</span>
        <span class="k">return</span> <span class="n">prods</span><span class="o">;</span>
    <span class="o">}</span>
</pre></table></code></div></div><p>例如，如果想要筛选价格小于8000的商品，那么新建一个价格过滤类既可</p><div class="language-java highlighter-rouge"><div class="code-header"> <span data-label-text="Java"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="已复制！"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
</pre><td class="rouge-code"><pre><span class="kd">public</span> <span class="kd">class</span> <span class="nc">PricePredicate</span> <span class="kd">implements</span> <span class="nc">MyPredicate</span><span class="o">&lt;</span><span class="nc">Product</span><span class="o">&gt;</span> <span class="o">{</span>
    <span class="nd">@Override</span>
    <span class="kd">public</span> <span class="kt">boolean</span> <span class="nf">test</span><span class="o">(</span><span class="nc">Product</span> <span class="n">product</span><span class="o">)</span> <span class="o">{</span>
        <span class="k">return</span> <span class="n">product</span><span class="o">.</span><span class="na">getPrice</span><span class="o">()</span> <span class="o">&lt;</span> <span class="mi">8000</span><span class="o">;</span>
    <span class="o">}</span>
<span class="o">}</span>
</pre></table></code></div></div><p>这样实现的话可能有人会说，每次变更需求都需要新建一个实现类，感觉还是有点繁琐呀，那么再来优化一下</p><p>优化二：使用匿名内部类</p><p>定义过滤方法：</p><div class="language-java highlighter-rouge"><div class="code-header"> <span data-label-text="Java"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="已复制！"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
</pre><td class="rouge-code"><pre><span class="kd">public</span> <span class="nc">List</span><span class="o">&lt;</span><span class="nc">Product</span><span class="o">&gt;</span> <span class="nf">filterProductByPredicate</span><span class="o">(</span><span class="nc">List</span><span class="o">&lt;</span><span class="nc">Product</span><span class="o">&gt;</span> <span class="n">list</span><span class="o">,</span><span class="nc">MyPredicate</span><span class="o">&lt;</span><span class="nc">Product</span><span class="o">&gt;</span> <span class="n">mp</span><span class="o">){</span>
        <span class="nc">List</span><span class="o">&lt;</span><span class="nc">Product</span><span class="o">&gt;</span> <span class="n">prods</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">ArrayList</span><span class="o">&lt;&gt;();</span>
        <span class="k">for</span> <span class="o">(</span><span class="nc">Product</span> <span class="n">prod</span> <span class="o">:</span> <span class="n">list</span><span class="o">){</span>
            <span class="k">if</span> <span class="o">(</span><span class="n">mp</span><span class="o">.</span><span class="na">test</span><span class="o">(</span><span class="n">prod</span><span class="o">)){</span>
                <span class="n">prods</span><span class="o">.</span><span class="na">add</span><span class="o">(</span><span class="n">prod</span><span class="o">);</span>
            <span class="o">}</span>
        <span class="o">}</span>
        <span class="k">return</span> <span class="n">prods</span><span class="o">;</span>
    <span class="o">}</span>
</pre></table></code></div></div><p>调用过滤方法的时候：</p><div class="language-java highlighter-rouge"><div class="code-header"> <span data-label-text="Java"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="已复制！"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
</pre><td class="rouge-code"><pre><span class="c1">// 按价格过滤</span>
<span class="kd">public</span> <span class="kt">void</span> <span class="nf">test2</span><span class="o">(){</span>
    <span class="n">filterProductByPredicate</span><span class="o">(</span><span class="n">proList</span><span class="o">,</span> <span class="k">new</span> <span class="nc">MyPredicate</span><span class="o">&lt;</span><span class="nc">Product</span><span class="o">&gt;()</span> <span class="o">{</span>
        <span class="nd">@Override</span>
        <span class="kd">public</span> <span class="kt">boolean</span> <span class="nf">test</span><span class="o">(</span><span class="nc">Product</span> <span class="n">product</span><span class="o">)</span> <span class="o">{</span>
            <span class="k">return</span> <span class="n">product</span><span class="o">.</span><span class="na">getPrice</span><span class="o">()</span> <span class="o">&lt;</span> <span class="mi">8000</span><span class="o">;</span>
        <span class="o">}</span>
    <span class="o">});</span>
<span class="o">}</span>

 <span class="c1">// 按颜色过滤</span>
 <span class="kd">public</span> <span class="kt">void</span> <span class="nf">test3</span><span class="o">(){</span>
     <span class="n">filterProductByPredicate</span><span class="o">(</span><span class="n">proList</span><span class="o">,</span> <span class="k">new</span> <span class="nc">MyPredicate</span><span class="o">&lt;</span><span class="nc">Product</span><span class="o">&gt;()</span> <span class="o">{</span>
         <span class="nd">@Override</span>
         <span class="kd">public</span> <span class="kt">boolean</span> <span class="nf">test</span><span class="o">(</span><span class="nc">Product</span> <span class="n">product</span><span class="o">)</span> <span class="o">{</span>
             <span class="k">return</span> <span class="s">"红色"</span><span class="o">.</span><span class="na">equals</span><span class="o">(</span><span class="n">product</span><span class="o">.</span><span class="na">getColor</span><span class="o">());</span>
         <span class="o">}</span>
     <span class="o">});</span>
 <span class="o">}</span>
</pre></table></code></div></div><p>使用匿名内部类，就不需要每次都新建一个实现类，直接在方法内部实现。看到匿名内部类，不禁想起了Lambda表达式。</p><p>优化三：使用lambda表达式</p><p>定义过滤方法：</p><div class="language-java highlighter-rouge"><div class="code-header"> <span data-label-text="Java"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="已复制！"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
</pre><td class="rouge-code"><pre><span class="kd">public</span> <span class="nc">List</span><span class="o">&lt;</span><span class="nc">Product</span><span class="o">&gt;</span> <span class="nf">filterProductByPredicate</span><span class="o">(</span><span class="nc">List</span><span class="o">&lt;</span><span class="nc">Product</span><span class="o">&gt;</span> <span class="n">list</span><span class="o">,</span><span class="nc">MyPredicate</span><span class="o">&lt;</span><span class="nc">Product</span><span class="o">&gt;</span> <span class="n">mp</span><span class="o">){</span>
        <span class="nc">List</span><span class="o">&lt;</span><span class="nc">Product</span><span class="o">&gt;</span> <span class="n">prods</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">ArrayList</span><span class="o">&lt;&gt;();</span>
        <span class="k">for</span> <span class="o">(</span><span class="nc">Product</span> <span class="n">prod</span> <span class="o">:</span> <span class="n">list</span><span class="o">){</span>
            <span class="k">if</span> <span class="o">(</span><span class="n">mp</span><span class="o">.</span><span class="na">test</span><span class="o">(</span><span class="n">prod</span><span class="o">)){</span>
                <span class="n">prods</span><span class="o">.</span><span class="na">add</span><span class="o">(</span><span class="n">prod</span><span class="o">);</span>
            <span class="o">}</span>
        <span class="o">}</span>
        <span class="k">return</span> <span class="n">prods</span><span class="o">;</span>
    <span class="o">}</span>
</pre></table></code></div></div><p>使用lambda表达式进行过滤</p><div class="language-java highlighter-rouge"><div class="code-header"> <span data-label-text="Java"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="已复制！"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
</pre><td class="rouge-code"><pre><span class="nd">@Test</span>
<span class="kd">public</span> <span class="kt">void</span> <span class="nf">test4</span><span class="o">(){</span>
      <span class="nc">List</span><span class="o">&lt;</span><span class="nc">Product</span><span class="o">&gt;</span> <span class="n">products</span> <span class="o">=</span> <span class="n">filterProductByPredicate</span><span class="o">(</span><span class="n">proList</span><span class="o">,</span> <span class="o">(</span><span class="n">p</span><span class="o">)</span> <span class="o">-&gt;</span> <span class="n">p</span><span class="o">.</span><span class="na">getPrice</span><span class="o">()</span> <span class="o">&lt;</span> <span class="mi">8000</span><span class="o">);</span>
      <span class="k">for</span> <span class="o">(</span><span class="nc">Product</span> <span class="n">pro</span> <span class="o">:</span> <span class="n">products</span><span class="o">){</span>
          <span class="nc">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">pro</span><span class="o">);</span>
      <span class="o">}</span>
  <span class="o">}</span>
</pre></table></code></div></div><p>在jdk1.8中还有更加简便的操作 <a href="https://so.csdn.net/so/search?q=Stream&amp;spm=1001.2101.3001.7020">Stream</a> API</p><p>优化四：使用Stream API</p><p>甚至不用定义过滤方法，直接在集合上进行操作</p><div class="language-java highlighter-rouge"><div class="code-header"> <span data-label-text="Java"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="已复制！"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
</pre><td class="rouge-code"><pre><span class="c1">// 使用jdk1.8中的Stream API进行集合的操作</span>
<span class="nd">@Test</span>
<span class="kd">public</span> <span class="kt">void</span> <span class="nf">test</span><span class="o">(){</span>
    <span class="c1">// 根据价格过滤</span>
    <span class="n">proList</span><span class="o">.</span><span class="na">stream</span><span class="o">()</span>
           <span class="o">.</span><span class="na">fliter</span><span class="o">((</span><span class="n">p</span><span class="o">)</span> <span class="o">-&gt;</span> <span class="n">p</span><span class="o">.</span><span class="na">getPrice</span><span class="o">()</span> <span class="o">&lt;</span><span class="mi">8000</span><span class="o">)</span>
           <span class="o">.</span><span class="na">limit</span><span class="o">(</span><span class="mi">2</span><span class="o">)</span>
           <span class="o">.</span><span class="na">forEach</span><span class="o">(</span><span class="nc">System</span><span class="o">.</span><span class="na">out</span><span class="o">::</span><span class="n">println</span><span class="o">);</span>

    <span class="c1">// 根据颜色过滤</span>
    <span class="n">proList</span><span class="o">.</span><span class="na">stream</span><span class="o">()</span>
           <span class="o">.</span><span class="na">fliter</span><span class="o">((</span><span class="n">p</span><span class="o">)</span> <span class="o">-&gt;</span> <span class="s">"红色"</span><span class="o">.</span><span class="na">equals</span><span class="o">(</span><span class="n">p</span><span class="o">.</span><span class="na">getColor</span><span class="o">()))</span>
           <span class="o">.</span><span class="na">forEach</span><span class="o">(</span><span class="nc">System</span><span class="o">.</span><span class="na">out</span><span class="o">::</span><span class="n">println</span><span class="o">);</span>

    <span class="c1">// 遍历输出商品名称</span>
    <span class="n">proList</span><span class="o">.</span><span class="na">stream</span><span class="o">()</span>
           <span class="o">.</span><span class="na">map</span><span class="o">(</span><span class="nl">Product:</span><span class="o">:</span><span class="n">getName</span><span class="o">)</span>
           <span class="o">.</span><span class="na">forEach</span><span class="o">(</span><span class="nc">System</span><span class="o">.</span><span class="na">out</span><span class="o">::</span><span class="n">println</span><span class="o">);</span>
<span class="o">}</span>
</pre></table></code></div></div><p>Lmabda表达式的语法总结： () -&gt; ();</p><div class="table-wrapper"><table><thead><tr><th>前置<th>语法<tbody><tr><td>无参数无返回值<td>() -&gt; System.out.println(“Hello WOrld”)<tr><td>有一个参数无返回值<td>(x) -&gt; System.out.println(x)<tr><td>有且只有一个参数无返回值<td>x -&gt; System.out.println(x)<tr><td>有多个参数，有返回值，有多条lambda体语句<td>(x，y) -&gt; {System.out.println(“xxx”);return xxxx;}；<tr><td>有多个参数，有返回值，只有一条lambda体语句<td>(x，y) -&gt; xxxx</table></div><p>口诀：左右遇一省括号，左侧推断类型省</p><p>注：当一个接口中存在多个抽象方法时，如果使用lambda表达式，并不能智能匹配对应的抽象方法，因此引入了函数式接口的概念</p><h2 id="函数式接口"><span class="mr-2"><a href="https://so.csdn.net/so/search?q=函数式接口&amp;spm=1001.2101.3001.7020"><span class="mr-2">函数式接口</a></span><a href="#函数式接口" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h2><blockquote><p>函数式接口的提出是为了给Lambda表达式的使用提供更好的支持。</p></blockquote><p>什么是函数式接口？ 简单来说就是只定义了一个抽象方法的接口（Object类的public方法除外），就是函数式接口，并且还提供了注解：@FunctionalInterface</p><p>常见的四大函数式接口</p><ul><li>Consumer 《T》：消费型接口，有参无返回值</ul><div class="language-java highlighter-rouge"><div class="code-header"> <span data-label-text="Java"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="已复制！"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
</pre><td class="rouge-code"><pre>    <span class="nd">@Test</span>
    <span class="kd">public</span> <span class="kt">void</span> <span class="nf">test</span><span class="o">(){</span>
        <span class="n">changeStr</span><span class="o">(</span><span class="s">"hello"</span><span class="o">,(</span><span class="n">str</span><span class="o">)</span> <span class="o">-&gt;</span> <span class="nc">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">str</span><span class="o">));</span>
    <span class="o">}</span>

    <span class="cm">/**
     *  Consumer&lt;T&gt; 消费型接口
     * @param str
     * @param con
     */</span>
    <span class="kd">public</span> <span class="kt">void</span> <span class="nf">changeStr</span><span class="o">(</span><span class="nc">String</span> <span class="n">str</span><span class="o">,</span> <span class="nc">Consumer</span><span class="o">&lt;</span><span class="nc">String</span><span class="o">&gt;</span> <span class="n">con</span><span class="o">){</span>
        <span class="n">con</span><span class="o">.</span><span class="na">accept</span><span class="o">(</span><span class="n">str</span><span class="o">);</span>
    <span class="o">}</span>
</pre></table></code></div></div><ul><li>Supplier 《T》：供给型接口，无参有返回值</ul><div class="language-java highlighter-rouge"><div class="code-header"> <span data-label-text="Java"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="已复制！"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
</pre><td class="rouge-code"><pre>    <span class="nd">@Test</span>
    <span class="kd">public</span> <span class="kt">void</span> <span class="nf">test2</span><span class="o">(){</span>
        <span class="nc">String</span> <span class="n">value</span> <span class="o">=</span> <span class="n">getValue</span><span class="o">(()</span> <span class="o">-&gt;</span> <span class="s">"hello"</span><span class="o">);</span>
        <span class="nc">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">value</span><span class="o">);</span>
    <span class="o">}</span>

    <span class="cm">/**
     *  Supplier&lt;T&gt; 供给型接口
     * @param sup
     * @return
     */</span>
    <span class="kd">public</span> <span class="nc">String</span> <span class="nf">getValue</span><span class="o">(</span><span class="nc">Supplier</span><span class="o">&lt;</span><span class="nc">String</span><span class="o">&gt;</span> <span class="n">sup</span><span class="o">){</span>
        <span class="k">return</span> <span class="n">sup</span><span class="o">.</span><span class="na">get</span><span class="o">();</span>
    <span class="o">}</span>
</pre></table></code></div></div><ul><li>Function 《T,R》：:函数式接口，有参有返回值</ul><div class="language-java highlighter-rouge"><div class="code-header"> <span data-label-text="Java"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="已复制！"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
</pre><td class="rouge-code"><pre>    <span class="nd">@Test</span>
    <span class="kd">public</span> <span class="kt">void</span> <span class="nf">test3</span><span class="o">(){</span>
        <span class="nc">Long</span> <span class="n">result</span> <span class="o">=</span> <span class="n">changeNum</span><span class="o">(</span><span class="mi">100L</span><span class="o">,</span> <span class="o">(</span><span class="n">x</span><span class="o">)</span> <span class="o">-&gt;</span> <span class="n">x</span> <span class="o">+</span> <span class="mi">200L</span><span class="o">);</span>
        <span class="nc">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">result</span><span class="o">);</span>
    <span class="o">}</span>

    <span class="cm">/**
     *  Function&lt;T,R&gt; 函数式接口
     * @param num
     * @param fun
     * @return
     */</span>
    <span class="kd">public</span> <span class="nc">Long</span> <span class="nf">changeNum</span><span class="o">(</span><span class="nc">Long</span> <span class="n">num</span><span class="o">,</span> <span class="nc">Function</span><span class="o">&lt;</span><span class="nc">Long</span><span class="o">,</span> <span class="nc">Long</span><span class="o">&gt;</span> <span class="n">fun</span><span class="o">){</span>
        <span class="k">return</span> <span class="n">fun</span><span class="o">.</span><span class="na">apply</span><span class="o">(</span><span class="n">num</span><span class="o">);</span>
    <span class="o">}</span>
</pre></table></code></div></div><ul><li>Predicate《T》： 断言型接口，有参有返回值，返回值是boolean类型</ul><div class="language-java highlighter-rouge"><div class="code-header"> <span data-label-text="Java"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="已复制！"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
</pre><td class="rouge-code"><pre><span class="kd">public</span> <span class="kt">void</span> <span class="nf">test4</span><span class="o">(){</span>
        <span class="kt">boolean</span> <span class="n">result</span> <span class="o">=</span> <span class="n">changeBoolean</span><span class="o">(</span><span class="s">"hello"</span><span class="o">,</span> <span class="o">(</span><span class="n">str</span><span class="o">)</span> <span class="o">-&gt;</span> <span class="n">str</span><span class="o">.</span><span class="na">length</span><span class="o">()</span> <span class="o">&gt;</span> <span class="mi">5</span><span class="o">);</span>
        <span class="nc">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">result</span><span class="o">);</span>
    <span class="o">}</span>

    <span class="cm">/**
     *  Predicate&lt;T&gt; 断言型接口
     * @param str
     * @param pre
     * @return
     */</span>
    <span class="kd">public</span> <span class="kt">boolean</span> <span class="nf">changeBoolean</span><span class="o">(</span><span class="nc">String</span> <span class="n">str</span><span class="o">,</span> <span class="nc">Predicate</span><span class="o">&lt;</span><span class="nc">String</span><span class="o">&gt;</span> <span class="n">pre</span><span class="o">){</span>
        <span class="k">return</span> <span class="n">pre</span><span class="o">.</span><span class="na">test</span><span class="o">(</span><span class="n">str</span><span class="o">);</span>
    <span class="o">}</span>
</pre></table></code></div></div><p>在四大核心函数式接口基础上，还提供了诸如BiFunction、BinaryOperation、toIntFunction等扩展的函数式接口，都是在这四种函数式接口上扩展而来的，不做赘述。</p><p>总结：函数式接口的提出是为了让我们更加方便的使用lambda表达式，不需要自己再手动创建一个函数式接口，直接拿来用就好了，贴</p><h2 id="方法引用"><span class="mr-2">方法引用</span><a href="#方法引用" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h2><blockquote><p>若lambda体中的内容有方法已经实现了，那么可以使用“方法引用” 也可以理解为方法引用是lambda表达式的另外一种表现形式并且其语法比lambda表达式更加简单</p></blockquote><p>(a) 方法引用 三种表现形式：</p><ol><li>对象：：实例方法名<li>类：：静态方法名<li>类：：实例方法名 （lambda参数列表中第一个参数是实例方法的调用 者，第二个参数是实例方法的参数时可用）</ol><div class="language-java highlighter-rouge"><div class="code-header"> <span data-label-text="Java"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="已复制！"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
</pre><td class="rouge-code"><pre> <span class="kd">public</span> <span class="kt">void</span> <span class="nf">test</span><span class="o">()</span> <span class="o">{</span>
        <span class="cm">/**
        *注意：
        *   1.lambda体中调用方法的参数列表与返回值类型，要与函数式接口中抽象方法的函数列表和返回值类型保持一致！
        *   2.若lambda参数列表中的第一个参数是实例方法的调用者，而第二个参数是实例方法的参数时，可以使用ClassName::method
        *
        */</span>
        <span class="nc">Consumer</span><span class="o">&lt;</span><span class="nc">Integer</span><span class="o">&gt;</span> <span class="n">con</span> <span class="o">=</span> <span class="o">(</span><span class="n">x</span><span class="o">)</span> <span class="o">-&gt;</span> <span class="nc">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">x</span><span class="o">);</span>
        <span class="n">con</span><span class="o">.</span><span class="na">accept</span><span class="o">(</span><span class="mi">100</span><span class="o">);</span>

        <span class="c1">// 方法引用-对象::实例方法</span>
        <span class="nc">Consumer</span><span class="o">&lt;</span><span class="nc">Integer</span><span class="o">&gt;</span> <span class="n">con2</span> <span class="o">=</span> <span class="nc">System</span><span class="o">.</span><span class="na">out</span><span class="o">::</span><span class="n">println</span><span class="o">;</span>
        <span class="n">con2</span><span class="o">.</span><span class="na">accept</span><span class="o">(</span><span class="mi">200</span><span class="o">);</span>

        <span class="c1">// 方法引用-类名::静态方法名</span>
        <span class="nc">BiFunction</span><span class="o">&lt;</span><span class="nc">Integer</span><span class="o">,</span> <span class="nc">Integer</span><span class="o">,</span> <span class="nc">Integer</span><span class="o">&gt;</span> <span class="n">biFun</span> <span class="o">=</span> <span class="o">(</span><span class="n">x</span><span class="o">,</span> <span class="n">y</span><span class="o">)</span> <span class="o">-&gt;</span> <span class="nc">Integer</span><span class="o">.</span><span class="na">compare</span><span class="o">(</span><span class="n">x</span><span class="o">,</span> <span class="n">y</span><span class="o">);</span>
        <span class="nc">BiFunction</span><span class="o">&lt;</span><span class="nc">Integer</span><span class="o">,</span> <span class="nc">Integer</span><span class="o">,</span> <span class="nc">Integer</span><span class="o">&gt;</span> <span class="n">biFun2</span> <span class="o">=</span> <span class="nl">Integer:</span><span class="o">:</span><span class="n">compare</span><span class="o">;</span>
        <span class="nc">Integer</span> <span class="n">result</span> <span class="o">=</span> <span class="n">biFun2</span><span class="o">.</span><span class="na">apply</span><span class="o">(</span><span class="mi">100</span><span class="o">,</span> <span class="mi">200</span><span class="o">);</span>

        <span class="c1">// 方法引用-类名::实例方法名</span>
        <span class="nc">BiFunction</span><span class="o">&lt;</span><span class="nc">String</span><span class="o">,</span> <span class="nc">String</span><span class="o">,</span> <span class="nc">Boolean</span><span class="o">&gt;</span> <span class="n">fun1</span> <span class="o">=</span> <span class="o">(</span><span class="n">str1</span><span class="o">,</span> <span class="n">str2</span><span class="o">)</span> <span class="o">-&gt;</span> <span class="n">str1</span><span class="o">.</span><span class="na">equals</span><span class="o">(</span><span class="n">str2</span><span class="o">);</span>
        <span class="nc">BiFunction</span><span class="o">&lt;</span><span class="nc">String</span><span class="o">,</span> <span class="nc">String</span><span class="o">,</span> <span class="nc">Boolean</span><span class="o">&gt;</span> <span class="n">fun2</span> <span class="o">=</span> <span class="nl">String:</span><span class="o">:</span><span class="n">equals</span><span class="o">;</span>
        <span class="nc">Boolean</span> <span class="n">result2</span> <span class="o">=</span> <span class="n">fun2</span><span class="o">.</span><span class="na">apply</span><span class="o">(</span><span class="s">"hello"</span><span class="o">,</span> <span class="s">"world"</span><span class="o">);</span>
        <span class="nc">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">result2</span><span class="o">);</span>
    <span class="o">}</span>
</pre></table></code></div></div><p>(b)构造器引用 格式：ClassName::new</p><div class="language-java highlighter-rouge"><div class="code-header"> <span data-label-text="Java"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="已复制！"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
</pre><td class="rouge-code"><pre><span class="kd">public</span> <span class="kt">void</span> <span class="nf">test2</span><span class="o">()</span> <span class="o">{</span>

        <span class="c1">// 构造方法引用  类名::new</span>
        <span class="nc">Supplier</span><span class="o">&lt;</span><span class="nc">Employee</span><span class="o">&gt;</span> <span class="n">sup</span> <span class="o">=</span> <span class="o">()</span> <span class="o">-&gt;</span> <span class="k">new</span> <span class="nc">Employee</span><span class="o">();</span>
        <span class="nc">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">sup</span><span class="o">.</span><span class="na">get</span><span class="o">());</span>
        <span class="nc">Supplier</span><span class="o">&lt;</span><span class="nc">Employee</span><span class="o">&gt;</span> <span class="n">sup2</span> <span class="o">=</span> <span class="nl">Employee:</span><span class="o">:</span><span class="k">new</span><span class="o">;</span>
        <span class="nc">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">sup2</span><span class="o">.</span><span class="na">get</span><span class="o">());</span>

        <span class="c1">// 构造方法引用 类名::new （带一个参数）</span>
        <span class="nc">Function</span><span class="o">&lt;</span><span class="nc">Integer</span><span class="o">,</span> <span class="nc">Employee</span><span class="o">&gt;</span> <span class="n">fun</span> <span class="o">=</span> <span class="o">(</span><span class="n">x</span><span class="o">)</span> <span class="o">-&gt;</span> <span class="k">new</span> <span class="nc">Employee</span><span class="o">(</span><span class="n">x</span><span class="o">);</span>
        <span class="nc">Function</span><span class="o">&lt;</span><span class="nc">Integer</span><span class="o">,</span> <span class="nc">Employee</span><span class="o">&gt;</span> <span class="n">fun2</span> <span class="o">=</span> <span class="nl">Employee:</span><span class="o">:</span><span class="k">new</span><span class="o">;</span>
        <span class="nc">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">fun2</span><span class="o">.</span><span class="na">apply</span><span class="o">(</span><span class="mi">100</span><span class="o">));</span>
 <span class="o">}</span>
</pre></table></code></div></div><p>(c)数组引用</p><p>格式：Type[]::new</p><div class="language-java highlighter-rouge"><div class="code-header"> <span data-label-text="Java"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="已复制！"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
</pre><td class="rouge-code"><pre><span class="kd">public</span> <span class="kt">void</span> <span class="nf">test</span><span class="o">(){</span>
        <span class="c1">// 数组引用</span>
        <span class="nc">Function</span><span class="o">&lt;</span><span class="nc">Integer</span><span class="o">,</span> <span class="nc">String</span><span class="o">[]&gt;</span> <span class="n">fun</span> <span class="o">=</span> <span class="o">(</span><span class="n">x</span><span class="o">)</span> <span class="o">-&gt;</span> <span class="k">new</span> <span class="nc">String</span><span class="o">[</span><span class="n">x</span><span class="o">];</span>
        <span class="nc">Function</span><span class="o">&lt;</span><span class="nc">Integer</span><span class="o">,</span> <span class="nc">String</span><span class="o">[]&gt;</span> <span class="n">fun2</span> <span class="o">=</span> <span class="nc">String</span><span class="o">[]::</span><span class="k">new</span><span class="o">;</span>
        <span class="nc">String</span><span class="o">[]</span> <span class="n">strArray</span> <span class="o">=</span> <span class="n">fun2</span><span class="o">.</span><span class="na">apply</span><span class="o">(</span><span class="mi">10</span><span class="o">);</span>
        <span class="nc">Arrays</span><span class="o">.</span><span class="na">stream</span><span class="o">(</span><span class="n">strArray</span><span class="o">).</span><span class="na">forEach</span><span class="o">(</span><span class="nc">System</span><span class="o">.</span><span class="na">out</span><span class="o">::</span><span class="n">println</span><span class="o">);</span>
<span class="o">}</span>
</pre></table></code></div></div><h2 id="stream-api"><span class="mr-2">Stream <a href="https://so.csdn.net/so/search?q=API&amp;spm=1001.2101.3001.7020"><span class="mr-2">API</a></span><a href="#stream-api" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h2><p>Stream操作的三个步骤</p><ul><li>创建stream<li>中间操作（过滤、map）<li>终止操作</ul><p>stream的创建：</p><div class="language-java highlighter-rouge"><div class="code-header"> <span data-label-text="Java"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="已复制！"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
</pre><td class="rouge-code"><pre>    <span class="c1">// 1，校验通过Collection 系列集合提供的stream()或者paralleStream()</span>
    <span class="nc">List</span><span class="o">&lt;</span><span class="nc">String</span><span class="o">&gt;</span> <span class="n">list</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">ArrayList</span><span class="o">&lt;&gt;();</span>
    <span class="nc">Strean</span><span class="o">&lt;</span><span class="nc">String</span><span class="o">&gt;</span> <span class="n">stream1</span> <span class="o">=</span> <span class="n">list</span><span class="o">.</span><span class="na">stream</span><span class="o">();</span>

    <span class="c1">// 2.通过Arrays的静态方法stream()获取数组流</span>
    <span class="nc">String</span><span class="o">[]</span> <span class="n">str</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">String</span><span class="o">[</span><span class="mi">10</span><span class="o">];</span>
    <span class="nc">Stream</span><span class="o">&lt;</span><span class="nc">String</span><span class="o">&gt;</span> <span class="n">stream2</span> <span class="o">=</span> <span class="nc">Arrays</span><span class="o">.</span><span class="na">stream</span><span class="o">(</span><span class="n">str</span><span class="o">);</span>

    <span class="c1">// 3.通过Stream类中的静态方法of</span>
    <span class="nc">Stream</span><span class="o">&lt;</span><span class="nc">String</span><span class="o">&gt;</span> <span class="n">stream3</span> <span class="o">=</span> <span class="nc">Stream</span><span class="o">.</span><span class="na">of</span><span class="o">(</span><span class="s">"aa"</span><span class="o">,</span><span class="s">"bb"</span><span class="o">,</span><span class="s">"cc"</span><span class="o">);</span>

    <span class="c1">// 4.创建无限流</span>
    <span class="c1">// 迭代</span>
    <span class="nc">Stream</span><span class="o">&lt;</span><span class="nc">Integer</span><span class="o">&gt;</span> <span class="n">stream4</span> <span class="o">=</span> <span class="nc">Stream</span><span class="o">.</span><span class="na">iterate</span><span class="o">(</span><span class="mi">0</span><span class="o">,(</span><span class="n">x</span><span class="o">)</span> <span class="o">-&gt;</span> <span class="n">x</span><span class="o">+</span><span class="mi">2</span><span class="o">);</span>

    <span class="c1">//生成</span>
    <span class="nc">Stream</span><span class="o">.</span><span class="na">generate</span><span class="o">(()</span> <span class="o">-&gt;</span><span class="nc">Math</span><span class="o">.</span><span class="na">random</span><span class="o">());</span>
</pre></table></code></div></div><p>Stream的中间操作:</p><div class="language-java highlighter-rouge"><div class="code-header"> <span data-label-text="Java"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="已复制！"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
</pre><td class="rouge-code"><pre><span class="cm">/**
   * 筛选 过滤  去重
   */</span>
  <span class="n">emps</span><span class="o">.</span><span class="na">stream</span><span class="o">()</span>
          <span class="o">.</span><span class="na">filter</span><span class="o">(</span><span class="n">e</span> <span class="o">-&gt;</span> <span class="n">e</span><span class="o">.</span><span class="na">getAge</span><span class="o">()</span> <span class="o">&gt;</span> <span class="mi">10</span><span class="o">)</span>
          <span class="o">.</span><span class="na">limit</span><span class="o">(</span><span class="mi">4</span><span class="o">)</span>
          <span class="o">.</span><span class="na">skip</span><span class="o">(</span><span class="mi">4</span><span class="o">)</span>
          <span class="c1">// 需要流中的元素重写hashCode和equals方法</span>
          <span class="o">.</span><span class="na">distinct</span><span class="o">()</span>
          <span class="o">.</span><span class="na">forEach</span><span class="o">(</span><span class="nc">System</span><span class="o">.</span><span class="na">out</span><span class="o">::</span><span class="n">println</span><span class="o">);</span>


  <span class="cm">/**
   *  生成新的流 通过map映射
   */</span>
  <span class="n">emps</span><span class="o">.</span><span class="na">stream</span><span class="o">()</span>
          <span class="o">.</span><span class="na">map</span><span class="o">((</span><span class="n">e</span><span class="o">)</span> <span class="o">-&gt;</span> <span class="n">e</span><span class="o">.</span><span class="na">getAge</span><span class="o">())</span>
          <span class="o">.</span><span class="na">forEach</span><span class="o">(</span><span class="nc">System</span><span class="o">.</span><span class="na">out</span><span class="o">::</span><span class="n">println</span><span class="o">);</span>


  <span class="cm">/**
   *  自然排序  定制排序
   */</span>
  <span class="n">emps</span><span class="o">.</span><span class="na">stream</span><span class="o">()</span>
          <span class="o">.</span><span class="na">sorted</span><span class="o">((</span><span class="n">e1</span> <span class="o">,</span><span class="n">e2</span><span class="o">)</span> <span class="o">-&gt;</span> <span class="o">{</span>
              <span class="k">if</span> <span class="o">(</span><span class="n">e1</span><span class="o">.</span><span class="na">getAge</span><span class="o">().</span><span class="na">equals</span><span class="o">(</span><span class="n">e2</span><span class="o">.</span><span class="na">getAge</span><span class="o">())){</span>
                  <span class="k">return</span> <span class="n">e1</span><span class="o">.</span><span class="na">getName</span><span class="o">().</span><span class="na">compareTo</span><span class="o">(</span><span class="n">e2</span><span class="o">.</span><span class="na">getName</span><span class="o">());</span>
              <span class="o">}</span> <span class="k">else</span><span class="o">{</span>
                  <span class="k">return</span> <span class="n">e1</span><span class="o">.</span><span class="na">getAge</span><span class="o">().</span><span class="na">compareTo</span><span class="o">(</span><span class="n">e2</span><span class="o">.</span><span class="na">getAge</span><span class="o">());</span>
              <span class="o">}</span>
          <span class="o">})</span>
          <span class="o">.</span><span class="na">forEach</span><span class="o">(</span><span class="nc">System</span><span class="o">.</span><span class="na">out</span><span class="o">::</span><span class="n">println</span><span class="o">);</span>
</pre></table></code></div></div><p>Stream的终止操作：</p><div class="language-java highlighter-rouge"><div class="code-header"> <span data-label-text="Java"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="已复制！"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42
43
44
45
46
47
</pre><td class="rouge-code"><pre> <span class="cm">/**
         *      查找和匹配
         *          allMatch-检查是否匹配所有元素
         *          anyMatch-检查是否至少匹配一个元素
         *          noneMatch-检查是否没有匹配所有元素
         *          findFirst-返回第一个元素
         *          findAny-返回当前流中的任意元素
         *          count-返回流中元素的总个数
         *          max-返回流中最大值
         *          min-返回流中最小值
         */</span>

        <span class="cm">/**
         *  检查是否匹配元素
         */</span>
        <span class="kt">boolean</span> <span class="n">b1</span> <span class="o">=</span> <span class="n">emps</span><span class="o">.</span><span class="na">stream</span><span class="o">()</span>
                <span class="o">.</span><span class="na">allMatch</span><span class="o">((</span><span class="n">e</span><span class="o">)</span> <span class="o">-&gt;</span> <span class="n">e</span><span class="o">.</span><span class="na">getStatus</span><span class="o">().</span><span class="na">equals</span><span class="o">(</span><span class="nc">Employee</span><span class="o">.</span><span class="na">Status</span><span class="o">.</span><span class="na">BUSY</span><span class="o">));</span>
        <span class="nc">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">b1</span><span class="o">);</span>

        <span class="kt">boolean</span> <span class="n">b2</span> <span class="o">=</span> <span class="n">emps</span><span class="o">.</span><span class="na">stream</span><span class="o">()</span>
                <span class="o">.</span><span class="na">anyMatch</span><span class="o">((</span><span class="n">e</span><span class="o">)</span> <span class="o">-&gt;</span> <span class="n">e</span><span class="o">.</span><span class="na">getStatus</span><span class="o">().</span><span class="na">equals</span><span class="o">(</span><span class="nc">Employee</span><span class="o">.</span><span class="na">Status</span><span class="o">.</span><span class="na">BUSY</span><span class="o">));</span>
        <span class="nc">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">b2</span><span class="o">);</span>

        <span class="kt">boolean</span> <span class="n">b3</span> <span class="o">=</span> <span class="n">emps</span><span class="o">.</span><span class="na">stream</span><span class="o">()</span>
                <span class="o">.</span><span class="na">noneMatch</span><span class="o">((</span><span class="n">e</span><span class="o">)</span> <span class="o">-&gt;</span> <span class="n">e</span><span class="o">.</span><span class="na">getStatus</span><span class="o">().</span><span class="na">equals</span><span class="o">(</span><span class="nc">Employee</span><span class="o">.</span><span class="na">Status</span><span class="o">.</span><span class="na">BUSY</span><span class="o">));</span>
        <span class="nc">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">b3</span><span class="o">);</span>

        <span class="nc">Optional</span><span class="o">&lt;</span><span class="nc">Employee</span><span class="o">&gt;</span> <span class="n">opt</span> <span class="o">=</span> <span class="n">emps</span><span class="o">.</span><span class="na">stream</span><span class="o">()</span>
                <span class="o">.</span><span class="na">findFirst</span><span class="o">();</span>
        <span class="nc">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">opt</span><span class="o">.</span><span class="na">get</span><span class="o">());</span>

        <span class="c1">// 并行流</span>
        <span class="nc">Optional</span><span class="o">&lt;</span><span class="nc">Employee</span><span class="o">&gt;</span> <span class="n">opt2</span> <span class="o">=</span> <span class="n">emps</span><span class="o">.</span><span class="na">parallelStream</span><span class="o">()</span>
                <span class="o">.</span><span class="na">findAny</span><span class="o">();</span>
        <span class="nc">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">opt2</span><span class="o">.</span><span class="na">get</span><span class="o">());</span>

        <span class="kt">long</span> <span class="n">count</span> <span class="o">=</span> <span class="n">emps</span><span class="o">.</span><span class="na">stream</span><span class="o">()</span>
                <span class="o">.</span><span class="na">count</span><span class="o">();</span>
        <span class="nc">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">count</span><span class="o">);</span>

        <span class="nc">Optional</span><span class="o">&lt;</span><span class="nc">Employee</span><span class="o">&gt;</span> <span class="n">max</span> <span class="o">=</span> <span class="n">emps</span><span class="o">.</span><span class="na">stream</span><span class="o">()</span>
                <span class="o">.</span><span class="na">max</span><span class="o">((</span><span class="n">e1</span><span class="o">,</span> <span class="n">e2</span><span class="o">)</span> <span class="o">-&gt;</span> <span class="nc">Double</span><span class="o">.</span><span class="na">compare</span><span class="o">(</span><span class="n">e1</span><span class="o">.</span><span class="na">getSalary</span><span class="o">(),</span> <span class="n">e2</span><span class="o">.</span><span class="na">getSalary</span><span class="o">()));</span>
        <span class="nc">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">max</span><span class="o">.</span><span class="na">get</span><span class="o">());</span>

        <span class="nc">Optional</span><span class="o">&lt;</span><span class="nc">Employee</span><span class="o">&gt;</span> <span class="n">min</span> <span class="o">=</span> <span class="n">emps</span><span class="o">.</span><span class="na">stream</span><span class="o">()</span>
                <span class="o">.</span><span class="na">min</span><span class="o">((</span><span class="n">e1</span><span class="o">,</span> <span class="n">e2</span><span class="o">)</span> <span class="o">-&gt;</span> <span class="nc">Double</span><span class="o">.</span><span class="na">compare</span><span class="o">(</span><span class="n">e1</span><span class="o">.</span><span class="na">getSalary</span><span class="o">(),</span> <span class="n">e2</span><span class="o">.</span><span class="na">getSalary</span><span class="o">()));</span>
        <span class="nc">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">min</span><span class="o">.</span><span class="na">get</span><span class="o">());</span>
</pre></table></code></div></div><p>还有功能比较强大的两个终止操作 reduce和collect reduce操作： reduce:(T identity,BinaryOperator)/reduce(BinaryOperator)-可以将流中元素反复结合起来，得到一个值</p><div class="language-java highlighter-rouge"><div class="code-header"> <span data-label-text="Java"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="已复制！"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
</pre><td class="rouge-code"><pre>         <span class="cm">/**
         *  reduce ：规约操作
         */</span>
        <span class="nc">List</span><span class="o">&lt;</span><span class="nc">Integer</span><span class="o">&gt;</span> <span class="n">list</span> <span class="o">=</span> <span class="nc">Arrays</span><span class="o">.</span><span class="na">asList</span><span class="o">(</span><span class="mi">1</span><span class="o">,</span><span class="mi">2</span><span class="o">,</span><span class="mi">3</span><span class="o">,</span><span class="mi">4</span><span class="o">,</span><span class="mi">5</span><span class="o">,</span><span class="mi">6</span><span class="o">,</span><span class="mi">7</span><span class="o">,</span><span class="mi">8</span><span class="o">,</span><span class="mi">9</span><span class="o">,</span><span class="mi">10</span><span class="o">);</span>
        <span class="nc">Integer</span> <span class="n">count2</span> <span class="o">=</span> <span class="n">list</span><span class="o">.</span><span class="na">stream</span><span class="o">()</span>
                <span class="o">.</span><span class="na">reduce</span><span class="o">(</span><span class="mi">0</span><span class="o">,</span> <span class="o">(</span><span class="n">x</span><span class="o">,</span> <span class="n">y</span><span class="o">)</span> <span class="o">-&gt;</span> <span class="n">x</span> <span class="o">+</span> <span class="n">y</span><span class="o">);</span>
        <span class="nc">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">count2</span><span class="o">);</span>

        <span class="nc">Optional</span><span class="o">&lt;</span><span class="nc">Double</span><span class="o">&gt;</span> <span class="n">sum</span> <span class="o">=</span> <span class="n">emps</span><span class="o">.</span><span class="na">stream</span><span class="o">()</span>
                <span class="o">.</span><span class="na">map</span><span class="o">(</span><span class="nl">Employee:</span><span class="o">:</span><span class="n">getSalary</span><span class="o">)</span>
                <span class="o">.</span><span class="na">reduce</span><span class="o">(</span><span class="nl">Double:</span><span class="o">:</span><span class="n">sum</span><span class="o">);</span>
        <span class="nc">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">sum</span><span class="o">);</span>

</pre></table></code></div></div><p>collect操作：Collect-将流转换为其他形式，接收一个Collection接口的实现，用于给Stream中元素做汇总的方法</p><div class="language-java highlighter-rouge"><div class="code-header"> <span data-label-text="Java"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="已复制！"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
</pre><td class="rouge-code"><pre>        <span class="cm">/**
         *  collect：收集操作
         */</span>

        <span class="nc">List</span><span class="o">&lt;</span><span class="nc">Integer</span><span class="o">&gt;</span> <span class="n">ageList</span> <span class="o">=</span> <span class="n">emps</span><span class="o">.</span><span class="na">stream</span><span class="o">()</span>
                <span class="o">.</span><span class="na">map</span><span class="o">(</span><span class="nl">Employee:</span><span class="o">:</span><span class="n">getAge</span><span class="o">)</span>
                <span class="o">.</span><span class="na">collect</span><span class="o">(</span><span class="nc">Collectors</span><span class="o">.</span><span class="na">toList</span><span class="o">());</span>
        <span class="n">ageList</span><span class="o">.</span><span class="na">stream</span><span class="o">().</span><span class="na">forEach</span><span class="o">(</span><span class="nc">System</span><span class="o">.</span><span class="na">out</span><span class="o">::</span><span class="n">println</span><span class="o">);</span>
</pre></table></code></div></div><h2 id="并行流和串行流"><span class="mr-2">并行流和串行流</span><a href="#并行流和串行流" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h2><p>在jdk1.8新的stream包中针对集合的操作也提供了并行操作流和串行操作流。并行流就是把内容切割成多个数据块，并且使用多个线程分别处理每个数据块的内容。Stream api中声明可以通过parallel()与sequential()方法在并行流和串行流之间进行切换。 jdk1.8并行流使用的是fork/join框架进行并行操作</p><h3 id="forkjoin框架"><span class="mr-2">ForkJoin框架</span><a href="#forkjoin框架" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3><p>Fork/Join 框架：就是在必要的情况下，将一个大任务，进行拆分(fork)成若干个小任务（拆到不可再拆时），再将一个个的小任务运算的结果进行 join 汇总。 关键字：递归分合、分而治之。 采用 “工作窃取”模式（work-stealing）： 当执行新的任务时它可以将其拆分分成更小的任务执行，并将小任务加到线 程队列中，然后再从一个随机线程的队列中偷一个并把它放在自己的队列中 相对于一般的线程池实现,fork/join框架的优势体现在对其中包含的任务的 处理方式上.在一般的线程池中,如果一个线程正在执行的任务由于某些原因 无法继续运行,那么该线程会处于等待状态.而在fork/join框架实现中,如果 某个子问题由于等待另外一个子问题的完成而无法继续运行.那么处理该子 问题的线程会主动寻找其他尚未运行的子问题来执行.这种方式减少了线程 的等待时间,提高了性能.。</p><div class="language-java highlighter-rouge"><div class="code-header"> <span data-label-text="Java"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="已复制！"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42
43
44
45
46
47
48
49
50
51
52
53
54
55
56
57
58
59
60
61
62
63
64
65
66
67
68
69
70
71
72
73
74
75
76
77
78
79
80
81
82
83
84
85
86
87
88
89
90
91
92
93
94
95
96
97
98
</pre><td class="rouge-code"><pre><span class="cm">/**
 * 要想使用Fark—Join，类必须继承
 * RecursiveAction（无返回值）
 * Or
 * RecursiveTask（有返回值）
*
*/</span>
<span class="kd">public</span> <span class="kd">class</span> <span class="nc">ForkJoin</span> <span class="kd">extends</span> <span class="nc">RecursiveTask</span><span class="o">&lt;</span><span class="nc">Long</span><span class="o">&gt;</span> <span class="o">{</span>

    <span class="cm">/**
     * 要想使用Fark—Join，类必须继承RecursiveAction（无返回值） 或者
     * RecursiveTask（有返回值）
     *
     * @author Wuyouxin
     */</span>
    <span class="kd">private</span> <span class="kd">static</span> <span class="kd">final</span> <span class="kt">long</span> <span class="n">serialVersionUID</span> <span class="o">=</span> <span class="mi">23423422L</span><span class="o">;</span>

    <span class="kd">private</span> <span class="kt">long</span> <span class="n">start</span><span class="o">;</span>
    <span class="kd">private</span> <span class="kt">long</span> <span class="n">end</span><span class="o">;</span>

    <span class="kd">public</span> <span class="nf">ForkJoin</span><span class="o">()</span> <span class="o">{</span>
    <span class="o">}</span>

    <span class="kd">public</span> <span class="nf">ForkJoin</span><span class="o">(</span><span class="kt">long</span> <span class="n">start</span><span class="o">,</span> <span class="kt">long</span> <span class="n">end</span><span class="o">)</span> <span class="o">{</span>
        <span class="k">this</span><span class="o">.</span><span class="na">start</span> <span class="o">=</span> <span class="n">start</span><span class="o">;</span>
        <span class="k">this</span><span class="o">.</span><span class="na">end</span> <span class="o">=</span> <span class="n">end</span><span class="o">;</span>
    <span class="o">}</span>

    <span class="c1">// 定义阙值</span>
    <span class="kd">private</span> <span class="kd">static</span> <span class="kd">final</span> <span class="kt">long</span> <span class="no">THRESHOLD</span> <span class="o">=</span> <span class="mi">10000L</span><span class="o">;</span>

    <span class="nd">@Override</span>
    <span class="kd">protected</span> <span class="nc">Long</span> <span class="nf">compute</span><span class="o">()</span> <span class="o">{</span>
        <span class="k">if</span> <span class="o">(</span><span class="n">end</span> <span class="o">-</span> <span class="n">start</span> <span class="o">&lt;=</span> <span class="no">THRESHOLD</span><span class="o">)</span> <span class="o">{</span>
            <span class="kt">long</span> <span class="n">sum</span> <span class="o">=</span> <span class="mi">0</span><span class="o">;</span>
            <span class="k">for</span> <span class="o">(</span><span class="kt">long</span> <span class="n">i</span> <span class="o">=</span> <span class="n">start</span><span class="o">;</span> <span class="n">i</span> <span class="o">&lt;</span> <span class="n">end</span><span class="o">;</span> <span class="n">i</span><span class="o">++)</span> <span class="o">{</span>
                <span class="n">sum</span> <span class="o">+=</span> <span class="n">i</span><span class="o">;</span>
            <span class="o">}</span>
            <span class="k">return</span> <span class="n">sum</span><span class="o">;</span>
        <span class="o">}</span> <span class="k">else</span> <span class="o">{</span>
            <span class="kt">long</span> <span class="n">middle</span> <span class="o">=</span> <span class="o">(</span><span class="n">end</span> <span class="o">-</span> <span class="n">start</span><span class="o">)</span> <span class="o">/</span> <span class="mi">2</span><span class="o">;</span>
            <span class="nc">ForkJoin</span> <span class="n">left</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">ForkJoin</span><span class="o">(</span><span class="n">start</span><span class="o">,</span> <span class="n">middle</span><span class="o">);</span>
            <span class="c1">//拆分子任务，压入线程队列</span>
            <span class="n">left</span><span class="o">.</span><span class="na">fork</span><span class="o">();</span>
            <span class="nc">ForkJoin</span> <span class="n">right</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">ForkJoin</span><span class="o">(</span><span class="n">middle</span> <span class="o">+</span> <span class="mi">1</span><span class="o">,</span> <span class="n">end</span><span class="o">);</span>
            <span class="n">right</span><span class="o">.</span><span class="na">fork</span><span class="o">();</span>

            <span class="c1">//合并并返回</span>
            <span class="k">return</span> <span class="n">left</span><span class="o">.</span><span class="na">join</span><span class="o">()</span> <span class="o">+</span> <span class="n">right</span><span class="o">.</span><span class="na">join</span><span class="o">();</span>
        <span class="o">}</span>
    <span class="o">}</span>

    <span class="cm">/**
     * 实现数的累加
     */</span>
    <span class="nd">@Test</span>
    <span class="kd">public</span> <span class="kt">void</span> <span class="nf">test1</span><span class="o">()</span> <span class="o">{</span>
        <span class="c1">//开始时间</span>
        <span class="nc">Instant</span> <span class="n">start</span> <span class="o">=</span> <span class="nc">Instant</span><span class="o">.</span><span class="na">now</span><span class="o">();</span>

        <span class="c1">//这里需要一个线程池的支持</span>
        <span class="nc">ForkJoinPool</span> <span class="n">pool</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">ForkJoinPool</span><span class="o">();</span>

        <span class="nc">ForkJoinTask</span><span class="o">&lt;</span><span class="nc">Long</span><span class="o">&gt;</span> <span class="n">task</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">ForkJoin</span><span class="o">(</span><span class="mi">0L</span><span class="o">,</span> <span class="mi">10000000000L</span><span class="o">);</span>
        <span class="c1">// 没有返回值     pool.execute();</span>
        <span class="c1">// 有返回值</span>
        <span class="kt">long</span> <span class="n">sum</span> <span class="o">=</span> <span class="n">pool</span><span class="o">.</span><span class="na">invoke</span><span class="o">(</span><span class="n">task</span><span class="o">);</span>

        <span class="c1">//结束时间</span>
        <span class="nc">Instant</span> <span class="n">end</span> <span class="o">=</span> <span class="nc">Instant</span><span class="o">.</span><span class="na">now</span><span class="o">();</span>
        <span class="nc">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="nc">Duration</span><span class="o">.</span><span class="na">between</span><span class="o">(</span><span class="n">start</span><span class="o">,</span> <span class="n">end</span><span class="o">).</span><span class="na">getSeconds</span><span class="o">());</span>
    <span class="o">}</span>

    <span class="cm">/**
     * java8 并行流 parallel()
     */</span>
    <span class="nd">@Test</span>
    <span class="kd">public</span> <span class="kt">void</span> <span class="nf">test2</span><span class="o">()</span> <span class="o">{</span>
        <span class="c1">//开始时间</span>
        <span class="nc">Instant</span> <span class="n">start</span> <span class="o">=</span> <span class="nc">Instant</span><span class="o">.</span><span class="na">now</span><span class="o">();</span>

        <span class="c1">// 并行流计算    累加求和</span>
        <span class="nc">LongStream</span><span class="o">.</span><span class="na">rangeClosed</span><span class="o">(</span><span class="mi">0</span><span class="o">,</span> <span class="mi">10000000000L</span><span class="o">).</span><span class="na">parallel</span><span class="o">()</span>
                <span class="o">.</span><span class="na">reduce</span><span class="o">(</span><span class="mi">0</span><span class="o">,</span> <span class="nc">Long</span> <span class="o">::</span> <span class="n">sum</span><span class="o">);</span>

        <span class="c1">//结束时间</span>
        <span class="nc">Instant</span> <span class="n">end</span> <span class="o">=</span> <span class="nc">Instant</span><span class="o">.</span><span class="na">now</span><span class="o">();</span>
        <span class="nc">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="nc">Duration</span><span class="o">.</span><span class="na">between</span><span class="o">(</span><span class="n">start</span><span class="o">,</span> <span class="n">end</span><span class="o">).</span><span class="na">getSeconds</span><span class="o">());</span>
    <span class="o">}</span>

    <span class="nd">@Test</span>
    <span class="kd">public</span> <span class="kt">void</span> <span class="nf">test3</span><span class="o">(){</span>
        <span class="nc">List</span><span class="o">&lt;</span><span class="nc">Integer</span><span class="o">&gt;</span> <span class="n">list</span> <span class="o">=</span> <span class="nc">Arrays</span><span class="o">.</span><span class="na">asList</span><span class="o">(</span><span class="mi">1</span><span class="o">,</span> <span class="mi">2</span><span class="o">,</span> <span class="mi">3</span><span class="o">,</span> <span class="mi">4</span><span class="o">,</span> <span class="mi">5</span><span class="o">);</span>
        <span class="n">list</span><span class="o">.</span><span class="na">stream</span><span class="o">().</span><span class="na">forEach</span><span class="o">(</span><span class="nc">System</span><span class="o">.</span><span class="na">out</span><span class="o">::</span><span class="n">print</span><span class="o">);</span>

        <span class="n">list</span><span class="o">.</span><span class="na">parallelStream</span><span class="o">()</span>
            <span class="o">.</span><span class="na">forEach</span><span class="o">(</span><span class="nc">System</span><span class="o">.</span><span class="na">out</span><span class="o">::</span><span class="n">print</span><span class="o">);</span>
    <span class="o">}</span>
</pre></table></code></div></div><p>展示多线程的效果：</p><div class="language-java highlighter-rouge"><div class="code-header"> <span data-label-text="Java"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="已复制！"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
</pre><td class="rouge-code"><pre><span class="nd">@Test</span>
    <span class="kd">public</span> <span class="kt">void</span> <span class="nf">test</span><span class="o">(){</span>
        <span class="c1">// 并行流 多个线程执行</span>
        <span class="nc">List</span><span class="o">&lt;</span><span class="nc">Integer</span><span class="o">&gt;</span> <span class="n">numbers</span> <span class="o">=</span> <span class="nc">Arrays</span><span class="o">.</span><span class="na">asList</span><span class="o">(</span><span class="mi">1</span><span class="o">,</span> <span class="mi">2</span><span class="o">,</span> <span class="mi">3</span><span class="o">,</span> <span class="mi">4</span><span class="o">,</span> <span class="mi">5</span><span class="o">,</span> <span class="mi">6</span><span class="o">,</span> <span class="mi">7</span><span class="o">,</span> <span class="mi">8</span><span class="o">,</span> <span class="mi">9</span><span class="o">);</span>
        <span class="n">numbers</span><span class="o">.</span><span class="na">parallelStream</span><span class="o">()</span>
                <span class="o">.</span><span class="na">forEach</span><span class="o">(</span><span class="nc">System</span><span class="o">.</span><span class="na">out</span><span class="o">::</span><span class="n">print</span><span class="o">);</span>

        <span class="c1">//</span>
        <span class="nc">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">"========================="</span><span class="o">);</span>
        <span class="n">numbers</span><span class="o">.</span><span class="na">stream</span><span class="o">()</span>
                     <span class="o">.</span><span class="na">sequential</span><span class="o">()</span>
                     <span class="o">.</span><span class="na">forEach</span><span class="o">(</span><span class="nc">System</span><span class="o">.</span><span class="na">out</span><span class="o">::</span><span class="n">print</span><span class="o">);</span>
    <span class="o">}</span>
</pre></table></code></div></div><h2 id="optional容器"><span class="mr-2">Optional容器</span><a href="#optional容器" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h2><div class="language-java highlighter-rouge"><div class="code-header"> <span data-label-text="Java"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="已复制！"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42
43
44
45
46
47
48
49
50
51
52
53
54
55
56
57
58
</pre><td class="rouge-code"><pre><span class="n">使用Optional容器可以快速的定位NPE</span><span class="err">，</span><span class="n">并且在一定程度上可以减少对参数非空检验的代码量</span><span class="err">。</span>
<span class="mi">1</span>
<span class="cm">/**
     *      Optional.of(T t); // 创建一个Optional实例
     *      Optional.empty(); // 创建一个空的Optional实例
     *      Optional.ofNullable(T t); // 若T不为null，创建一个Optional实例，否则创建一个空实例
     *      isPresent();    // 判断是够包含值
     *      orElse(T t);   //如果调用对象包含值，返回该值，否则返回T
     *      orElseGet(Supplier s);  // 如果调用对象包含值，返回该值，否则返回s中获取的值
     *      map(Function f): // 如果有值对其处理，并返回处理后的Optional，否则返回Optional.empty();
     *      flatMap(Function mapper);// 与map类似。返回值是Optional
     *
     *      总结：Optional.of(null)  会直接报NPE
     */</span>

<span class="nc">Optional</span><span class="o">&lt;</span><span class="nc">Employee</span><span class="o">&gt;</span> <span class="n">op</span> <span class="o">=</span> <span class="nc">Optional</span><span class="o">.</span><span class="na">of</span><span class="o">(</span><span class="k">new</span> <span class="nc">Employee</span><span class="o">(</span><span class="s">"zhansan"</span><span class="o">,</span> <span class="mi">11</span><span class="o">,</span> <span class="mf">12.32</span><span class="o">,</span> <span class="nc">Employee</span><span class="o">.</span><span class="na">Status</span><span class="o">.</span><span class="na">BUSY</span><span class="o">));</span>
        <span class="nc">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">op</span><span class="o">.</span><span class="na">get</span><span class="o">());</span>

        <span class="c1">// NPE</span>
        <span class="nc">Optional</span><span class="o">&lt;</span><span class="nc">Employee</span><span class="o">&gt;</span> <span class="n">op2</span> <span class="o">=</span> <span class="nc">Optional</span><span class="o">.</span><span class="na">of</span><span class="o">(</span><span class="kc">null</span><span class="o">);</span>
        <span class="nc">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">op2</span><span class="o">);</span>
<span class="nd">@Test</span>
    <span class="kd">public</span> <span class="kt">void</span> <span class="nf">test2</span><span class="o">(){</span>
        <span class="nc">Optional</span><span class="o">&lt;</span><span class="nc">Object</span><span class="o">&gt;</span> <span class="n">op</span> <span class="o">=</span> <span class="nc">Optional</span><span class="o">.</span><span class="na">empty</span><span class="o">();</span>
        <span class="nc">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">op</span><span class="o">);</span>

        <span class="c1">// No value present</span>
        <span class="nc">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">op</span><span class="o">.</span><span class="na">get</span><span class="o">());</span>
    <span class="o">}</span>
<span class="nd">@Test</span>
    <span class="kd">public</span> <span class="kt">void</span> <span class="nf">test3</span><span class="o">(){</span>
        <span class="nc">Optional</span><span class="o">&lt;</span><span class="nc">Employee</span><span class="o">&gt;</span> <span class="n">op</span> <span class="o">=</span> <span class="nc">Optional</span><span class="o">.</span><span class="na">ofNullable</span><span class="o">(</span><span class="k">new</span> <span class="nc">Employee</span><span class="o">(</span><span class="s">"lisi"</span><span class="o">,</span> <span class="mi">33</span><span class="o">,</span> <span class="mf">131.42</span><span class="o">,</span> <span class="nc">Employee</span><span class="o">.</span><span class="na">Status</span><span class="o">.</span><span class="na">FREE</span><span class="o">));</span>
        <span class="nc">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">op</span><span class="o">.</span><span class="na">get</span><span class="o">());</span>

        <span class="nc">Optional</span><span class="o">&lt;</span><span class="nc">Object</span><span class="o">&gt;</span> <span class="n">op2</span> <span class="o">=</span> <span class="nc">Optional</span><span class="o">.</span><span class="na">ofNullable</span><span class="o">(</span><span class="kc">null</span><span class="o">);</span>
        <span class="nc">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">op2</span><span class="o">);</span>
       <span class="c1">// System.out.println(op2.get());</span>
    <span class="o">}</span>
    <span class="nd">@Test</span>
    <span class="kd">public</span> <span class="kt">void</span> <span class="nf">test5</span><span class="o">(){</span>
        <span class="nc">Optional</span><span class="o">&lt;</span><span class="nc">Employee</span><span class="o">&gt;</span> <span class="n">op1</span> <span class="o">=</span> <span class="nc">Optional</span><span class="o">.</span><span class="na">ofNullable</span><span class="o">(</span><span class="k">new</span> <span class="nc">Employee</span><span class="o">(</span><span class="s">"张三"</span><span class="o">,</span> <span class="mi">11</span><span class="o">,</span> <span class="mf">11.33</span><span class="o">,</span> <span class="nc">Employee</span><span class="o">.</span><span class="na">Status</span><span class="o">.</span><span class="na">VOCATION</span><span class="o">));</span>
        <span class="nc">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">op1</span><span class="o">.</span><span class="na">orElse</span><span class="o">(</span><span class="k">new</span> <span class="nc">Employee</span><span class="o">()));</span>
        <span class="nc">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">op1</span><span class="o">.</span><span class="na">orElse</span><span class="o">(</span><span class="kc">null</span><span class="o">));</span>
    <span class="o">}</span>

    <span class="nd">@Test</span>
    <span class="kd">public</span> <span class="kt">void</span> <span class="nf">test6</span><span class="o">(){</span>
        <span class="nc">Optional</span><span class="o">&lt;</span><span class="nc">Employee</span><span class="o">&gt;</span> <span class="n">op1</span> <span class="o">=</span> <span class="nc">Optional</span><span class="o">.</span><span class="na">of</span><span class="o">(</span><span class="k">new</span> <span class="nc">Employee</span><span class="o">(</span><span class="s">"田七"</span><span class="o">,</span> <span class="mi">11</span><span class="o">,</span> <span class="mf">12.31</span><span class="o">,</span> <span class="nc">Employee</span><span class="o">.</span><span class="na">Status</span><span class="o">.</span><span class="na">BUSY</span><span class="o">));</span>
        <span class="n">op1</span> <span class="o">=</span> <span class="nc">Optional</span><span class="o">.</span><span class="na">empty</span><span class="o">();</span>
        <span class="nc">Employee</span> <span class="n">employee</span> <span class="o">=</span> <span class="n">op1</span><span class="o">.</span><span class="na">orElseGet</span><span class="o">(()</span> <span class="o">-&gt;</span> <span class="k">new</span> <span class="nc">Employee</span><span class="o">());</span>
        <span class="nc">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">employee</span><span class="o">);</span>
    <span class="o">}</span>

    <span class="nd">@Test</span>
    <span class="kd">public</span> <span class="kt">void</span> <span class="nf">test7</span><span class="o">(){</span>
        <span class="nc">Optional</span><span class="o">&lt;</span><span class="nc">Employee</span><span class="o">&gt;</span> <span class="n">op1</span> <span class="o">=</span> <span class="nc">Optional</span><span class="o">.</span><span class="na">of</span><span class="o">(</span><span class="k">new</span> <span class="nc">Employee</span><span class="o">(</span><span class="s">"田七"</span><span class="o">,</span> <span class="mi">11</span><span class="o">,</span> <span class="mf">12.31</span><span class="o">,</span> <span class="nc">Employee</span><span class="o">.</span><span class="na">Status</span><span class="o">.</span><span class="na">BUSY</span><span class="o">));</span>
        <span class="nc">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">op1</span><span class="o">.</span><span class="na">map</span><span class="o">(</span> <span class="o">(</span><span class="n">e</span><span class="o">)</span> <span class="o">-&gt;</span> <span class="n">e</span><span class="o">.</span><span class="na">getSalary</span><span class="o">()).</span><span class="na">get</span><span class="o">());</span>
    <span class="o">}</span>
</pre></table></code></div></div><h2 id="接口中可以定义默认实现方法和静态方法"><span class="mr-2">接口中可以定义默认实现方法和静态方法</span><a href="#接口中可以定义默认实现方法和静态方法" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h2><p>在接口中可以使用default和static关键字来修饰接口中定义的普通方法</p><div class="language-java highlighter-rouge"><div class="code-header"> <span data-label-text="Java"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="已复制！"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
</pre><td class="rouge-code"><pre><span class="kd">public</span> <span class="kd">interface</span> <span class="nc">Interface</span> <span class="o">{</span>
    <span class="k">default</span>  <span class="nc">String</span> <span class="nf">getName</span><span class="o">(){</span>
        <span class="k">return</span> <span class="s">"zhangsan"</span><span class="o">;</span>
    <span class="o">}</span>

    <span class="kd">static</span> <span class="nc">String</span> <span class="nf">getName2</span><span class="o">(){</span>
        <span class="k">return</span> <span class="s">"zhangsan"</span><span class="o">;</span>
    <span class="o">}</span>
<span class="o">}</span>

</pre></table></code></div></div><p>在JDK1.8中很多接口会新增方法，为了保证1.8向下兼容，1.7版本中的接口实现类不用每个都重新实现新添加的接口方法，引入了default默认实现，static的用法是直接用接口名去调方法即可。当一个类继承父类又实现接口时，若后两者方法名相同，则优先继承父类中的同名方法，即“类优先”，如果实现两个同名方法的接口，则要求实现类必须手动声明默认实现哪个接口中的方法。</p><h2 id="新的日期api-localdate--localtime--localdatetime"><span class="mr-2">新的日期API LocalDate | LocalTime | LocalDateTime</span><a href="#新的日期api-localdate--localtime--localdatetime" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h2><p>新的日期API都是不可变的，更使用于多线程的使用环境中</p><div class="language-java highlighter-rouge"><div class="code-header"> <span data-label-text="Java"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="已复制！"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42
43
44
45
46
47
48
49
50
51
52
53
54
55
56
57
58
59
60
61
62
63
64
65
66
67
68
69
70
71
72
73
74
75
76
77
78
79
80
81
82
83
84
85
86
87
88
89
90
91
92
93
94
95
96
97
98
99
100
101
102
103
104
105
106
107
108
109
110
111
112
113
114
115
116
117
118
119
120
121
122
123
124
125
126
127
128
129
130
131
132
133
134
135
136
137
138
139
140
141
142
143
144
145
146
147
148
149
150
151
152
153
</pre><td class="rouge-code"><pre>    <span class="nd">@Test</span>
    <span class="kd">public</span> <span class="kt">void</span> <span class="nf">test</span><span class="o">(){</span>
        <span class="c1">// 从默认时区的系统时钟获取当前的日期时间。不用考虑时区差</span>
        <span class="nc">LocalDateTime</span> <span class="n">date</span> <span class="o">=</span> <span class="nc">LocalDateTime</span><span class="o">.</span><span class="na">now</span><span class="o">();</span>
        <span class="c1">//2018-07-15T14:22:39.759</span>
        <span class="nc">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">date</span><span class="o">);</span>

        <span class="nc">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">date</span><span class="o">.</span><span class="na">getYear</span><span class="o">());</span>
        <span class="nc">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">date</span><span class="o">.</span><span class="na">getMonthValue</span><span class="o">());</span>
        <span class="nc">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">date</span><span class="o">.</span><span class="na">getDayOfMonth</span><span class="o">());</span>
        <span class="nc">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">date</span><span class="o">.</span><span class="na">getHour</span><span class="o">());</span>
        <span class="nc">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">date</span><span class="o">.</span><span class="na">getMinute</span><span class="o">());</span>
        <span class="nc">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">date</span><span class="o">.</span><span class="na">getSecond</span><span class="o">());</span>
        <span class="nc">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">date</span><span class="o">.</span><span class="na">getNano</span><span class="o">());</span>

        <span class="c1">// 手动创建一个LocalDateTime实例</span>
        <span class="nc">LocalDateTime</span> <span class="n">date2</span> <span class="o">=</span> <span class="nc">LocalDateTime</span><span class="o">.</span><span class="na">of</span><span class="o">(</span><span class="mi">2017</span><span class="o">,</span> <span class="mi">12</span><span class="o">,</span> <span class="mi">17</span><span class="o">,</span> <span class="mi">9</span><span class="o">,</span> <span class="mi">31</span><span class="o">,</span> <span class="mi">31</span><span class="o">,</span> <span class="mi">31</span><span class="o">);</span>
        <span class="nc">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">date2</span><span class="o">);</span>
        <span class="c1">// 进行加操作，得到新的日期实例</span>
        <span class="nc">LocalDateTime</span> <span class="n">date3</span> <span class="o">=</span> <span class="n">date2</span><span class="o">.</span><span class="na">plusDays</span><span class="o">(</span><span class="mi">12</span><span class="o">);</span>
        <span class="nc">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">date3</span><span class="o">);</span>
        <span class="c1">// 进行减操作，得到新的日期实例</span>
        <span class="nc">LocalDateTime</span> <span class="n">date4</span> <span class="o">=</span> <span class="n">date3</span><span class="o">.</span><span class="na">minusYears</span><span class="o">(</span><span class="mi">2</span><span class="o">);</span>
        <span class="nc">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">date4</span><span class="o">);</span>
    <span class="o">}</span>

    <span class="nd">@Test</span>
    <span class="kd">public</span> <span class="kt">void</span> <span class="nf">test2</span><span class="o">(){</span>
        <span class="c1">// 时间戳  1970年1月1日00：00：00 到某一个时间点的毫秒值</span>
        <span class="c1">// 默认获取UTC时区</span>
        <span class="nc">Instant</span> <span class="n">ins</span> <span class="o">=</span> <span class="nc">Instant</span><span class="o">.</span><span class="na">now</span><span class="o">();</span>
        <span class="nc">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">ins</span><span class="o">);</span>

        <span class="nc">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="nc">LocalDateTime</span><span class="o">.</span><span class="na">now</span><span class="o">().</span><span class="na">toInstant</span><span class="o">(</span><span class="nc">ZoneOffset</span><span class="o">.</span><span class="na">of</span><span class="o">(</span><span class="s">"+8"</span><span class="o">)).</span><span class="na">toEpochMilli</span><span class="o">());</span>
        <span class="nc">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="nc">System</span><span class="o">.</span><span class="na">currentTimeMillis</span><span class="o">());</span>

        <span class="nc">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="nc">Instant</span><span class="o">.</span><span class="na">now</span><span class="o">().</span><span class="na">toEpochMilli</span><span class="o">());</span>
        <span class="nc">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="nc">Instant</span><span class="o">.</span><span class="na">now</span><span class="o">().</span><span class="na">atOffset</span><span class="o">(</span><span class="nc">ZoneOffset</span><span class="o">.</span><span class="na">ofHours</span><span class="o">(</span><span class="mi">8</span><span class="o">)).</span><span class="na">toInstant</span><span class="o">().</span><span class="na">toEpochMilli</span><span class="o">());</span>
    <span class="o">}</span>
    <span class="nd">@Test</span>
    <span class="kd">public</span> <span class="kt">void</span> <span class="nf">test3</span><span class="o">(){</span>
        <span class="c1">// Duration:计算两个时间之间的间隔</span>
        <span class="c1">// Period：计算两个日期之间的间隔</span>

        <span class="nc">Instant</span> <span class="n">ins1</span> <span class="o">=</span> <span class="nc">Instant</span><span class="o">.</span><span class="na">now</span><span class="o">();</span>

        <span class="k">try</span> <span class="o">{</span>
            <span class="nc">Thread</span><span class="o">.</span><span class="na">sleep</span><span class="o">(</span><span class="mi">1000</span><span class="o">);</span>
        <span class="o">}</span> <span class="k">catch</span> <span class="o">(</span><span class="nc">InterruptedException</span> <span class="n">e</span><span class="o">)</span> <span class="o">{</span>
            <span class="n">e</span><span class="o">.</span><span class="na">printStackTrace</span><span class="o">();</span>
        <span class="o">}</span>
        <span class="nc">Instant</span> <span class="n">ins2</span> <span class="o">=</span> <span class="nc">Instant</span><span class="o">.</span><span class="na">now</span><span class="o">();</span>
        <span class="nc">Duration</span> <span class="n">dura</span> <span class="o">=</span> <span class="nc">Duration</span><span class="o">.</span><span class="na">between</span><span class="o">(</span><span class="n">ins1</span><span class="o">,</span> <span class="n">ins2</span><span class="o">);</span>
        <span class="nc">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">dura</span><span class="o">);</span>
        <span class="nc">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">dura</span><span class="o">.</span><span class="na">toMillis</span><span class="o">());</span>

        <span class="nc">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">"======================"</span><span class="o">);</span>
        <span class="nc">LocalTime</span> <span class="n">localTime</span> <span class="o">=</span> <span class="nc">LocalTime</span><span class="o">.</span><span class="na">now</span><span class="o">();</span>
        <span class="k">try</span> <span class="o">{</span>
            <span class="nc">Thread</span><span class="o">.</span><span class="na">sleep</span><span class="o">(</span><span class="mi">1000</span><span class="o">);</span>
        <span class="o">}</span> <span class="k">catch</span> <span class="o">(</span><span class="nc">InterruptedException</span> <span class="n">e</span><span class="o">)</span> <span class="o">{</span>
            <span class="n">e</span><span class="o">.</span><span class="na">printStackTrace</span><span class="o">();</span>
        <span class="o">}</span>
        <span class="nc">LocalTime</span> <span class="n">localTime2</span> <span class="o">=</span> <span class="nc">LocalTime</span><span class="o">.</span><span class="na">now</span><span class="o">();</span>
        <span class="nc">Duration</span> <span class="n">du2</span> <span class="o">=</span> <span class="nc">Duration</span><span class="o">.</span><span class="na">between</span><span class="o">(</span><span class="n">localTime</span><span class="o">,</span> <span class="n">localTime2</span><span class="o">);</span>
        <span class="nc">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">du2</span><span class="o">);</span>
        <span class="nc">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">du2</span><span class="o">.</span><span class="na">toMillis</span><span class="o">());</span>
    <span class="o">}</span>
<span class="nd">@Test</span>
    <span class="kd">public</span> <span class="kt">void</span> <span class="nf">test4</span><span class="o">(){</span>
        <span class="nc">LocalDate</span> <span class="n">localDate</span> <span class="o">=</span><span class="nc">LocalDate</span><span class="o">.</span><span class="na">now</span><span class="o">();</span>

        <span class="k">try</span> <span class="o">{</span>
            <span class="nc">Thread</span><span class="o">.</span><span class="na">sleep</span><span class="o">(</span><span class="mi">1000</span><span class="o">);</span>
        <span class="o">}</span> <span class="k">catch</span> <span class="o">(</span><span class="nc">InterruptedException</span> <span class="n">e</span><span class="o">)</span> <span class="o">{</span>
            <span class="n">e</span><span class="o">.</span><span class="na">printStackTrace</span><span class="o">();</span>
        <span class="o">}</span>

        <span class="nc">LocalDate</span> <span class="n">localDate2</span> <span class="o">=</span> <span class="nc">LocalDate</span><span class="o">.</span><span class="na">of</span><span class="o">(</span><span class="mi">2016</span><span class="o">,</span><span class="mi">12</span><span class="o">,</span><span class="mi">12</span><span class="o">);</span>
        <span class="nc">Period</span> <span class="n">pe</span> <span class="o">=</span> <span class="nc">Period</span><span class="o">.</span><span class="na">between</span><span class="o">(</span><span class="n">localDate</span><span class="o">,</span> <span class="n">localDate2</span><span class="o">);</span>
        <span class="nc">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">pe</span><span class="o">);</span>
    <span class="o">}</span>
    <span class="nd">@Test</span>
    <span class="kd">public</span> <span class="kt">void</span> <span class="nf">test5</span><span class="o">(){</span>
        <span class="c1">// temperalAdjust 时间校验器</span>
        <span class="c1">// 例如获取下周日  下一个工作日</span>
        <span class="nc">LocalDateTime</span> <span class="n">ldt1</span> <span class="o">=</span> <span class="nc">LocalDateTime</span><span class="o">.</span><span class="na">now</span><span class="o">();</span>
        <span class="nc">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">ldt1</span><span class="o">);</span>

        <span class="c1">// 获取一年中的第一天</span>
        <span class="nc">LocalDateTime</span> <span class="n">ldt2</span> <span class="o">=</span> <span class="n">ldt1</span><span class="o">.</span><span class="na">withDayOfYear</span><span class="o">(</span><span class="mi">1</span><span class="o">);</span>
        <span class="nc">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">ldt2</span><span class="o">);</span>
        <span class="c1">// 获取一个月中的第一天</span>
        <span class="nc">LocalDateTime</span> <span class="n">ldt3</span> <span class="o">=</span> <span class="n">ldt1</span><span class="o">.</span><span class="na">withDayOfMonth</span><span class="o">(</span><span class="mi">1</span><span class="o">);</span>
        <span class="nc">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">ldt3</span><span class="o">);</span>

        <span class="nc">LocalDateTime</span> <span class="n">ldt4</span> <span class="o">=</span> <span class="n">ldt1</span><span class="o">.</span><span class="na">with</span><span class="o">(</span><span class="nc">TemporalAdjusters</span><span class="o">.</span><span class="na">next</span><span class="o">(</span><span class="nc">DayOfWeek</span><span class="o">.</span><span class="na">FRIDAY</span><span class="o">));</span>
        <span class="nc">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">ldt4</span><span class="o">);</span>

        <span class="c1">// 获取下一个工作日</span>
        <span class="nc">LocalDateTime</span> <span class="n">ldt5</span> <span class="o">=</span> <span class="n">ldt1</span><span class="o">.</span><span class="na">with</span><span class="o">((</span><span class="n">t</span><span class="o">)</span> <span class="o">-&gt;</span> <span class="o">{</span>
            <span class="nc">LocalDateTime</span> <span class="n">ldt6</span> <span class="o">=</span> <span class="o">(</span><span class="nc">LocalDateTime</span><span class="o">)</span><span class="n">t</span><span class="o">;</span>
            <span class="nc">DayOfWeek</span> <span class="n">dayOfWeek</span> <span class="o">=</span> <span class="n">ldt6</span><span class="o">.</span><span class="na">getDayOfWeek</span><span class="o">();</span>
            <span class="k">if</span> <span class="o">(</span><span class="nc">DayOfWeek</span><span class="o">.</span><span class="na">FRIDAY</span><span class="o">.</span><span class="na">equals</span><span class="o">(</span><span class="n">dayOfWeek</span><span class="o">)){</span>
                <span class="k">return</span> <span class="n">ldt6</span><span class="o">.</span><span class="na">plusDays</span><span class="o">(</span><span class="mi">3</span><span class="o">);</span>
            <span class="o">}</span>
            <span class="k">else</span> <span class="nf">if</span> <span class="o">(</span><span class="nc">DayOfWeek</span><span class="o">.</span><span class="na">SATURDAY</span><span class="o">.</span><span class="na">equals</span><span class="o">(</span><span class="n">dayOfWeek</span><span class="o">)){</span>
                <span class="k">return</span> <span class="n">ldt6</span><span class="o">.</span><span class="na">plusDays</span><span class="o">(</span><span class="mi">2</span><span class="o">);</span>
            <span class="o">}</span>
            <span class="k">else</span> <span class="o">{</span>
                <span class="k">return</span> <span class="n">ldt6</span><span class="o">.</span><span class="na">plusDays</span><span class="o">(</span><span class="mi">1</span><span class="o">);</span>
            <span class="o">}</span>
        <span class="o">});</span>
        <span class="nc">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">ldt5</span><span class="o">);</span>
    <span class="o">}</span>
    <span class="nd">@Test</span>
    <span class="kd">public</span> <span class="kt">void</span> <span class="nf">test6</span><span class="o">(){</span>
        <span class="c1">// DateTimeFormatter: 格式化时间/日期</span>
        <span class="c1">// 自定义格式</span>
        <span class="nc">LocalDateTime</span> <span class="n">ldt</span> <span class="o">=</span> <span class="nc">LocalDateTime</span><span class="o">.</span><span class="na">now</span><span class="o">();</span>
        <span class="nc">DateTimeFormatter</span> <span class="n">formatter</span> <span class="o">=</span> <span class="nc">DateTimeFormatter</span><span class="o">.</span><span class="na">ofPattern</span><span class="o">(</span><span class="s">"yyyy年MM月dd日"</span><span class="o">);</span>
        <span class="nc">String</span> <span class="n">strDate1</span> <span class="o">=</span> <span class="n">ldt</span><span class="o">.</span><span class="na">format</span><span class="o">(</span><span class="n">formatter</span><span class="o">);</span>
        <span class="nc">String</span> <span class="n">strDate</span> <span class="o">=</span> <span class="n">formatter</span><span class="o">.</span><span class="na">format</span><span class="o">(</span><span class="n">ldt</span><span class="o">);</span>
        <span class="nc">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">strDate</span><span class="o">);</span>
        <span class="nc">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">strDate1</span><span class="o">);</span>

        <span class="c1">// 使用api提供的格式</span>
        <span class="nc">DateTimeFormatter</span> <span class="n">dtf</span> <span class="o">=</span> <span class="nc">DateTimeFormatter</span><span class="o">.</span><span class="na">ISO_DATE</span><span class="o">;</span>
        <span class="nc">LocalDateTime</span> <span class="n">ldt2</span> <span class="o">=</span> <span class="nc">LocalDateTime</span><span class="o">.</span><span class="na">now</span><span class="o">();</span>
        <span class="nc">String</span> <span class="n">strDate3</span> <span class="o">=</span> <span class="n">dtf</span><span class="o">.</span><span class="na">format</span><span class="o">(</span><span class="n">ldt2</span><span class="o">);</span>
        <span class="nc">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">strDate3</span><span class="o">);</span>

        <span class="c1">// 解析字符串to时间</span>
        <span class="nc">DateTimeFormatter</span> <span class="n">df</span> <span class="o">=</span> <span class="nc">DateTimeFormatter</span><span class="o">.</span><span class="na">ofPattern</span><span class="o">(</span><span class="s">"yyyy-MM-dd HH:mm:ss"</span><span class="o">);</span>
        <span class="nc">LocalDateTime</span> <span class="n">time</span> <span class="o">=</span> <span class="nc">LocalDateTime</span><span class="o">.</span><span class="na">now</span><span class="o">();</span>
        <span class="nc">String</span> <span class="n">localTime</span> <span class="o">=</span> <span class="n">df</span><span class="o">.</span><span class="na">format</span><span class="o">(</span><span class="n">time</span><span class="o">);</span>
        <span class="nc">LocalDateTime</span> <span class="n">ldt4</span> <span class="o">=</span> <span class="nc">LocalDateTime</span><span class="o">.</span><span class="na">parse</span><span class="o">(</span><span class="s">"2017-09-28 17:07:05"</span><span class="o">,</span><span class="n">df</span><span class="o">);</span>
        <span class="nc">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">"LocalDateTime转成String类型的时间："</span><span class="o">+</span><span class="n">localTime</span><span class="o">);</span>
        <span class="nc">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">"String类型的时间转成LocalDateTime："</span><span class="o">+</span><span class="n">ldt4</span><span class="o">);</span>
    <span class="o">}</span>
    <span class="c1">// ZoneTime  ZoneDate       ZoneDateTime</span>
    <span class="nd">@Test</span>
    <span class="kd">public</span> <span class="kt">void</span> <span class="nf">test7</span><span class="o">(){</span>
        <span class="nc">LocalDateTime</span> <span class="n">now</span> <span class="o">=</span> <span class="nc">LocalDateTime</span><span class="o">.</span><span class="na">now</span><span class="o">(</span><span class="nc">ZoneId</span><span class="o">.</span><span class="na">of</span><span class="o">(</span><span class="s">"Asia/Shanghai"</span><span class="o">));</span>
        <span class="nc">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">now</span><span class="o">);</span>

        <span class="nc">LocalDateTime</span> <span class="n">now2</span> <span class="o">=</span> <span class="nc">LocalDateTime</span><span class="o">.</span><span class="na">now</span><span class="o">();</span>
        <span class="nc">ZonedDateTime</span> <span class="n">zdt</span> <span class="o">=</span> <span class="n">now2</span><span class="o">.</span><span class="na">atZone</span><span class="o">(</span><span class="nc">ZoneId</span><span class="o">.</span><span class="na">of</span><span class="o">(</span><span class="s">"Asia/Shanghai"</span><span class="o">));</span>
        <span class="nc">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">zdt</span><span class="o">);</span>

        <span class="nc">Set</span><span class="o">&lt;</span><span class="nc">String</span><span class="o">&gt;</span> <span class="n">set</span> <span class="o">=</span> <span class="nc">ZoneId</span><span class="o">.</span><span class="na">getAvailableZoneIds</span><span class="o">();</span>
        <span class="n">set</span><span class="o">.</span><span class="na">stream</span><span class="o">().</span><span class="na">forEach</span><span class="o">(</span><span class="nc">System</span><span class="o">.</span><span class="na">out</span><span class="o">::</span><span class="n">println</span><span class="o">);</span>
    <span class="o">}</span>
</pre></table></code></div></div><p>补充：</p><blockquote><p>表示日期的LocalDate 表示时间的LocalTime 表示日期时间的LocalDateTime</p></blockquote><p>新的日期API的几个优点：</p><div class="language-java highlighter-rouge"><div class="code-header"> <span data-label-text="Java"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="已复制！"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
</pre><td class="rouge-code"><pre> <span class="o">*</span> <span class="n">之前使用的java</span><span class="o">.</span><span class="na">util</span><span class="o">.</span><span class="na">Date月份从0开始</span><span class="err">，</span><span class="n">我们一般会</span><span class="o">+</span><span class="mi">1</span><span class="n">使用</span><span class="err">，</span><span class="n">很不方便</span><span class="err">，</span><span class="n">java</span><span class="o">.</span><span class="na">time</span><span class="o">.</span><span class="na">LocalDate月份和星期都改成了enum</span>
 <span class="o">*</span> <span class="n">java</span><span class="o">.</span><span class="na">util</span><span class="o">.</span><span class="na">Date和SimpleDateFormat都不是线程安全的</span><span class="err">，</span><span class="n">而LocalDate和LocalTime和最基本的String一样</span><span class="err">，</span><span class="n">是不变类型</span><span class="err">，</span><span class="n">不但线程安全</span><span class="err">，</span><span class="n">而且不能修改</span><span class="err">。</span>
 <span class="o">*</span> <span class="n">java</span><span class="o">.</span><span class="na">util</span><span class="o">.</span><span class="na">Date是一个</span><span class="err">“</span><span class="n">万能接口</span><span class="err">”，</span><span class="n">它包含日期</span><span class="err">、</span><span class="n">时间</span><span class="err">，</span><span class="n">还有毫秒数</span><span class="err">，</span><span class="n">更加明确需求取舍</span>
 <span class="o">*</span> <span class="n">新接口更好用的原因是考虑到了日期时间的操作</span><span class="err">，</span><span class="n">经常发生往前推或往后推几天的情况</span><span class="err">。</span><span class="n">用java</span><span class="o">.</span><span class="na">util</span><span class="o">.</span><span class="na">Date配合Calendar要写好多代码</span><span class="err">，</span><span class="n">而且一般的开发人员还不一定能写对</span><span class="err">。</span>

</pre></table></code></div></div><ul><li>LocalDate</ul><div class="language-java highlighter-rouge"><div class="code-header"> <span data-label-text="Java"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="已复制！"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
</pre><td class="rouge-code"><pre><span class="kd">public</span> <span class="kd">static</span> <span class="kt">void</span> <span class="nf">localDateTest</span><span class="o">()</span> <span class="o">{</span>

        <span class="c1">//获取当前日期,只含年月日 固定格式 yyyy-MM-dd    2018-05-04</span>
        <span class="nc">LocalDate</span> <span class="n">today</span> <span class="o">=</span> <span class="nc">LocalDate</span><span class="o">.</span><span class="na">now</span><span class="o">();</span>

        <span class="c1">// 根据年月日取日期，5月就是5，</span>
        <span class="nc">LocalDate</span> <span class="n">oldDate</span> <span class="o">=</span> <span class="nc">LocalDate</span><span class="o">.</span><span class="na">of</span><span class="o">(</span><span class="mi">2018</span><span class="o">,</span> <span class="mi">5</span><span class="o">,</span> <span class="mi">1</span><span class="o">);</span>

        <span class="c1">// 根据字符串取：默认格式yyyy-MM-dd，02不能写成2</span>
        <span class="nc">LocalDate</span> <span class="n">yesteday</span> <span class="o">=</span> <span class="nc">LocalDate</span><span class="o">.</span><span class="na">parse</span><span class="o">(</span><span class="s">"2018-05-03"</span><span class="o">);</span>

        <span class="c1">// 如果不是闰年 传入29号也会报错</span>
        <span class="nc">LocalDate</span><span class="o">.</span><span class="na">parse</span><span class="o">(</span><span class="s">"2018-02-29"</span><span class="o">);</span>
    <span class="o">}</span>
</pre></table></code></div></div><ul><li>LocalDate常用转化</ul><div class="language-java highlighter-rouge"><div class="code-header"> <span data-label-text="Java"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="已复制！"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
</pre><td class="rouge-code"><pre>    <span class="cm">/**
     * 日期转换常用,第一天或者最后一天...
     */</span>
    <span class="kd">public</span> <span class="kd">static</span> <span class="kt">void</span> <span class="nf">localDateTransferTest</span><span class="o">(){</span>
        <span class="c1">//2018-05-04</span>
        <span class="nc">LocalDate</span> <span class="n">today</span> <span class="o">=</span> <span class="nc">LocalDate</span><span class="o">.</span><span class="na">now</span><span class="o">();</span>
        <span class="c1">// 取本月第1天： 2018-05-01</span>
        <span class="nc">LocalDate</span> <span class="n">firstDayOfThisMonth</span> <span class="o">=</span> <span class="n">today</span><span class="o">.</span><span class="na">with</span><span class="o">(</span><span class="nc">TemporalAdjusters</span><span class="o">.</span><span class="na">firstDayOfMonth</span><span class="o">());</span>
        <span class="c1">// 取本月第2天：2018-05-02</span>
        <span class="nc">LocalDate</span> <span class="n">secondDayOfThisMonth</span> <span class="o">=</span> <span class="n">today</span><span class="o">.</span><span class="na">withDayOfMonth</span><span class="o">(</span><span class="mi">2</span><span class="o">);</span>
        <span class="c1">// 取本月最后一天，再也不用计算是28，29，30还是31： 2018-05-31</span>
        <span class="nc">LocalDate</span> <span class="n">lastDayOfThisMonth</span> <span class="o">=</span> <span class="n">today</span><span class="o">.</span><span class="na">with</span><span class="o">(</span><span class="nc">TemporalAdjusters</span><span class="o">.</span><span class="na">lastDayOfMonth</span><span class="o">());</span>
        <span class="c1">// 取下一天：2018-06-01</span>
        <span class="nc">LocalDate</span> <span class="n">firstDayOf2015</span> <span class="o">=</span> <span class="n">lastDayOfThisMonth</span><span class="o">.</span><span class="na">plusDays</span><span class="o">(</span><span class="mi">1</span><span class="o">);</span>
        <span class="c1">// 取2018年10月第一个周三 so easy?：  2018-10-03</span>
        <span class="nc">LocalDate</span> <span class="n">thirdMondayOf2018</span> <span class="o">=</span> <span class="nc">LocalDate</span><span class="o">.</span><span class="na">parse</span><span class="o">(</span><span class="s">"2018-10-01"</span><span class="o">).</span><span class="na">with</span><span class="o">(</span><span class="nc">TemporalAdjusters</span><span class="o">.</span><span class="na">firstInMonth</span><span class="o">(</span><span class="nc">DayOfWeek</span><span class="o">.</span><span class="na">WEDNESDAY</span><span class="o">));</span>
    <span class="o">}</span>
</pre></table></code></div></div><ul><li>LocalTime</ul><div class="language-java highlighter-rouge"><div class="code-header"> <span data-label-text="Java"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="已复制！"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
</pre><td class="rouge-code"><pre> <span class="kd">public</span> <span class="kd">static</span> <span class="kt">void</span> <span class="nf">localTimeTest</span><span class="o">(){</span>
        <span class="c1">//16:25:46.448(纳秒值)</span>
        <span class="nc">LocalTime</span> <span class="n">todayTimeWithMillisTime</span> <span class="o">=</span> <span class="nc">LocalTime</span><span class="o">.</span><span class="na">now</span><span class="o">();</span>
        <span class="c1">//16:28:48 不带纳秒值</span>
        <span class="nc">LocalTime</span> <span class="n">todayTimeWithNoMillisTime</span> <span class="o">=</span> <span class="nc">LocalTime</span><span class="o">.</span><span class="na">now</span><span class="o">().</span><span class="na">withNano</span><span class="o">(</span><span class="mi">0</span><span class="o">);</span>
        <span class="nc">LocalTime</span> <span class="n">time1</span> <span class="o">=</span> <span class="nc">LocalTime</span><span class="o">.</span><span class="na">parse</span><span class="o">(</span><span class="s">"23:59:59"</span><span class="o">);</span>
    <span class="o">}</span>
</pre></table></code></div></div><ul><li>LocalDateTime</ul><div class="language-java highlighter-rouge"><div class="code-header"> <span data-label-text="Java"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="已复制！"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
</pre><td class="rouge-code"><pre><span class="kd">public</span> <span class="kd">static</span> <span class="kt">void</span> <span class="nf">localDateTimeTest</span><span class="o">(){</span>
        <span class="c1">//转化为时间戳  毫秒值</span>
        <span class="kt">long</span> <span class="n">time1</span> <span class="o">=</span> <span class="nc">LocalDateTime</span><span class="o">.</span><span class="na">now</span><span class="o">().</span><span class="na">toInstant</span><span class="o">(</span><span class="nc">ZoneOffset</span><span class="o">.</span><span class="na">of</span><span class="o">(</span><span class="s">"+8"</span><span class="o">)).</span><span class="na">toEpochMilli</span><span class="o">();</span>
        <span class="kt">long</span> <span class="n">time2</span> <span class="o">=</span> <span class="nc">System</span><span class="o">.</span><span class="na">currentTimeMillis</span><span class="o">();</span>

        <span class="c1">//时间戳转化为localdatetime</span>
        <span class="nc">DateTimeFormatter</span> <span class="n">df</span><span class="o">=</span> <span class="nc">DateTimeFormatter</span><span class="o">.</span><span class="na">ofPattern</span><span class="o">(</span><span class="s">"YYYY-MM-dd HH:mm:ss.SSS"</span><span class="o">);</span>

        <span class="nc">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">df</span><span class="o">.</span><span class="na">format</span><span class="o">(</span><span class="nc">LocalDateTime</span><span class="o">.</span><span class="na">ofInstant</span><span class="o">(</span><span class="nc">Instant</span><span class="o">.</span><span class="na">ofEpochMilli</span><span class="o">(</span><span class="n">time1</span><span class="o">),</span><span class="nc">ZoneId</span><span class="o">.</span><span class="na">of</span><span class="o">(</span><span class="s">"Asia/Shanghai"</span><span class="o">))));</span>
    <span class="o">}</span>
</pre></table></code></div></div><p><em>路漫漫其修远兮，吾将上下而求索。</em>🚀</p></div><div class="post-tail-wrapper text-muted"><div class="post-meta mb-3"> <i class="far fa-folder-open fa-fw mr-1"></i> <a href='/categories/java%E5%AD%A6%E4%B9%A0%E6%80%BB%E7%BB%93/'>JAVA学习总结</a></div><div class="post-tags"> <i class="fa fa-tags fa-fw mr-1"></i> <a href="/tags/%E5%AD%A6%E4%B9%A0%E6%80%BB%E7%BB%93/" class="post-tag no-text-decoration" >学习总结</a></div><div class="post-tail-bottom d-flex justify-content-between align-items-center mt-3 pt-5 pb-2"><div class="license-wrapper"> 本文由作者按照 <a href="https://creativecommons.org/licenses/by/4.0/"> CC BY 4.0 </a> 进行授权</div><div class="share-wrapper"> <span class="share-label text-muted mr-1">分享</span> <span class="share-icons"> <a href="https://twitter.com/intent/tweet?text=JDK1.8+%E6%96%B0%E7%89%B9%E6%80%A7+-+%E6%9D%A8%E5%9C%A3%E5%83%A7&url=https%3A%2F%2Fysh8023.github.io%2Fposts%2FJDK1.8-%25E6%2596%25B0%25E7%2589%25B9%25E6%2580%25A7%2F" data-toggle="tooltip" data-placement="top" title="Twitter" target="_blank" rel="noopener" aria-label="Twitter"> <i class="fa-fw fab fa-twitter"></i> </a> <a href="https://www.facebook.com/sharer/sharer.php?title=JDK1.8+%E6%96%B0%E7%89%B9%E6%80%A7+-+%E6%9D%A8%E5%9C%A3%E5%83%A7&u=https%3A%2F%2Fysh8023.github.io%2Fposts%2FJDK1.8-%25E6%2596%25B0%25E7%2589%25B9%25E6%2580%25A7%2F" data-toggle="tooltip" data-placement="top" title="Facebook" target="_blank" rel="noopener" aria-label="Facebook"> <i class="fa-fw fab fa-facebook-square"></i> </a> <a href="https://t.me/share/url?url=https%3A%2F%2Fysh8023.github.io%2Fposts%2FJDK1.8-%25E6%2596%25B0%25E7%2589%25B9%25E6%2580%25A7%2F&text=JDK1.8+%E6%96%B0%E7%89%B9%E6%80%A7+-+%E6%9D%A8%E5%9C%A3%E5%83%A7" data-toggle="tooltip" data-placement="top" title="Telegram" target="_blank" rel="noopener" aria-label="Telegram"> <i class="fa-fw fab fa-telegram"></i> </a> <i id="copy-link" class="fa-fw fas fa-link small" data-toggle="tooltip" data-placement="top" title="分享链接" data-title-succeed="链接已复制！"> </i> </span></div></div></div></div></div><div id="panel-wrapper" class="col-xl-3 pl-2 text-muted"><div class="access"><div id="access-lastmod" class="post"><div class="panel-heading">最近更新</div><ul class="post-content pl-0 pb-1 ml-1 mt-2"><li><a href="/posts/JDK1.8-%E6%96%B0%E7%89%B9%E6%80%A7/">JDK1.8 新特性</a></ul></div><div id="access-tags"><div class="panel-heading">热门标签</div><div class="d-flex flex-wrap mt-3 mb-1 mr-3"> <a class="post-tag" href="/tags/java%E5%AD%A6%E4%B9%A0%E5%8E%86%E7%A8%8B%E8%AE%B0%E5%BD%95/">Java学习历程记录</a> <a class="post-tag" href="/tags/java%E5%AD%A6%E4%B9%A0%E8%A1%A5%E5%85%85%E6%80%BB%E7%BB%93/">Java学习补充总结</a> <a class="post-tag" href="/tags/%E5%AD%A6%E4%B9%A0%E6%80%BB%E7%BB%93/">学习总结</a> <a class="post-tag" href="/tags/%E6%8A%80%E6%9C%AF%E5%88%86%E4%BA%AB/">技术分享</a></div></div></div><script src="https://cdn.jsdelivr.net/gh/afeld/bootstrap-toc@1.0.1/dist/bootstrap-toc.min.js"></script><div id="toc-wrapper" class="pl-0 pr-4 mb-5"><div class="panel-heading pl-3 pt-2 mb-2">文章内容</div><nav id="toc" data-toggle="toc"></nav></div></div></div><div class="row"><div id="tail-wrapper" class="col-12 col-lg-11 col-xl-9 pl-3 pr-3 pr-xl-4"><div id="related-posts" class="mt-5 mb-2 mb-sm-4"><h3 class="pt-2 mt-1 mb-4 ml-1" data-toc-skip>相关文章</h3><div class="card-deck mb-4"><div class="card"> <a href="/posts/%E5%8D%95%E5%88%97%E6%A8%A1%E5%BC%8F-%E6%87%92%E6%B1%89&%E9%A5%BF%E6%B1%89/"><div class="card-body"> <em class="small" data-ts="1662354825" data-df="YYYY-MM-DD" > 2022-09-05 </em><h3 class="pt-0 mt-1 mb-3" data-toc-skip>单列模式-->懒汉&饿汉</h3><div class="text-muted small"><p> 单列模式： 可以保证系统中应用该模式的这个类永远只有一个实例 即一个类永远只能创建一个对象 饿汉单列设计模式 ​ 定义：在类获取对象的时候，对象已经提前创建好了。 ​ 设计步骤： 定义一个类，把构造器私有 定义一个静态变量存储对象 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 /...</p></div></div></a></div><div class="card"> <a href="/posts/IDM%E6%98%AF%E4%B8%AA%E5%95%A5/"><div class="card-body"> <em class="small" data-ts="1661740440" data-df="YYYY-MM-DD" > 2022-08-29 </em><h3 class="pt-0 mt-1 mb-3" data-toc-skip>啥是IDM？</h3><div class="text-muted small"><p> IDM是个啥 知己知彼 IDM是个强大的脚本插件，IDM脚本在资本主义日渐猖獗的背景下，被互联网大佬们创作出来，主要作用于百度网盘的下载限速的问题。 百度网盘如今店大欺客，限制下载速度不是一年两年了，早就引发社会主义人民的众怒，IDM的问世，就是善良的社会主义人民的”重拳出击”，狠狠的打了丑恶资本主义的一个大逼兜。 如何习得“重拳”技能？ 先下载油猴 油猴下载地址 下载过程 ...</p></div></div></a></div><div class="card"> <a href="/posts/JavaEEBase-NO.9/"><div class="card-body"> <em class="small" data-ts="1650465094" data-df="YYYY-MM-DD" > 2022-04-20 </em><h3 class="pt-0 mt-1 mb-3" data-toc-skip>NO.09 Java基础学习&心得体会</h3><div class="text-muted small"><p> NO.09 Java基础学习&amp;amp;心得体会 一、集合基础 1、集合概述 集合就是用来存储多个数据的容器 直接打印String StringBulider list 可以直接打印出里面的数据。 注：用equal方法的时候 尽量用常量.equal(变量) 集合和数组的特点对比 ⚫ 集合类的特点：提供一种存储空间可变的存储模型，存储的数据容量可以发生改变 ⚫ 集合和数...</p></div></div></a></div></div></div><div class="post-navigation d-flex justify-content-between"> <a href="/posts/IDM%E6%98%AF%E4%B8%AA%E5%95%A5/" class="btn btn-outline-primary" prompt="上一篇"><p>啥是IDM？</p></a> <a href="/posts/%E5%8D%95%E5%88%97%E6%A8%A1%E5%BC%8F-%E6%87%92%E6%B1%89&%E9%A5%BF%E6%B1%89/" class="btn btn-outline-primary" prompt="下一篇"><p>单列模式-->懒汉&饿汉</p></a></div></div></div><footer class="row pl-3 pr-3"><div class="col-12 d-flex justify-content-between align-items-center text-muted pl-0 pr-0"><div class="footer-left"><p class="mb-0"> © 2022 <a href="https://twitter.com/username">杨圣僧</a>. <span data-toggle="tooltip" data-placement="top" title="除非另有说明，本网站上的博客文章均由作者按照知识共享署名 4.0 国际 (CC BY 4.0) 许可协议进行授权。">保留部分权利。</span></p></div><div class="footer-right"><p class="mb-0"> 本站由 <a href="https://jekyllrb.com" target="_blank" rel="noopener">Jekyll</a> 生成，采用 <a href="https://github.com/cotes2020/jekyll-theme-chirpy" target="_blank" rel="noopener">Chirpy</a> 主题。</p></div></div></footer></div><div id="search-result-wrapper" class="d-flex justify-content-center unloaded"><div class="col-12 col-sm-11 post-content"><div id="search-hints"><div id="access-tags"><div class="panel-heading">热门标签</div><div class="d-flex flex-wrap mt-3 mb-1 mr-3"> <a class="post-tag" href="/tags/java%E5%AD%A6%E4%B9%A0%E5%8E%86%E7%A8%8B%E8%AE%B0%E5%BD%95/">Java学习历程记录</a> <a class="post-tag" href="/tags/java%E5%AD%A6%E4%B9%A0%E8%A1%A5%E5%85%85%E6%80%BB%E7%BB%93/">Java学习补充总结</a> <a class="post-tag" href="/tags/%E5%AD%A6%E4%B9%A0%E6%80%BB%E7%BB%93/">学习总结</a> <a class="post-tag" href="/tags/%E6%8A%80%E6%9C%AF%E5%88%86%E4%BA%AB/">技术分享</a></div></div></div><div id="search-results" class="d-flex flex-wrap justify-content-center text-muted mt-3"></div></div></div></div><script src="https://cdn.jsdelivr.net/npm/mermaid@8/dist/mermaid.min.js"></script> <script> $(function() { function updateMermaid(event) { if (event.source === window && event.data && event.data.direction === ModeToggle.ID) { const mode = event.data.message; if (typeof mermaid === "undefined") { return; } let expectedTheme = (mode === ModeToggle.DARK_MODE? "dark" : "default"); let config = { theme: expectedTheme }; /* Re-render the SVG › <https://github.com/mermaid-js/mermaid/issues/311#issuecomment-332557344> */ $(".mermaid").each(function() { let svgCode = $(this).prev().children().html(); $(this).removeAttr("data-processed"); $(this).html(svgCode); }); mermaid.initialize(config); mermaid.init(undefined, ".mermaid"); } } let initTheme = "default"; if ($("html[data-mode=dark]").length > 0 || ($("html[data-mode]").length == 0 && window.matchMedia("(prefers-color-scheme: dark)").matches ) ) { initTheme = "dark"; } let mermaidConf = { theme: initTheme /* <default|dark|forest|neutral> */ }; /* Markdown converts to HTML */ $("pre").has("code.language-mermaid").each(function() { let svgCode = $(this).children().html(); $(this).addClass("unloaded"); $(this).after(`<div class=\"mermaid\">${svgCode}</div>`); }); mermaid.initialize(mermaidConf); window.addEventListener("message", updateMermaid); }); </script><div id="mask"></div><a id="back-to-top" href="#" aria-label="back-to-top" class="btn btn-lg btn-box-shadow" role="button"> <i class="fas fa-angle-up"></i> </a><div id="notification" class="toast" role="alert" aria-live="assertive" aria-atomic="true" data-animation="true" data-autohide="false"><div class="toast-header"> <button type="button" class="ml-2 ml-auto close" data-dismiss="toast" aria-label="Close"> <span aria-hidden="true">&times;</span> </button></div><div class="toast-body text-center pt-0"><p class="pl-2 pr-2 mb-3"></p><button type="button" class="btn btn-primary" aria-label="Update"> </button></div></div><script src="https://cdn.jsdelivr.net/npm/simple-jekyll-search@1.10.0/dest/simple-jekyll-search.min.js"></script> <script> SimpleJekyllSearch({ searchInput: document.getElementById('search-input'), resultsContainer: document.getElementById('search-results'), json: '/assets/js/data/search.json', searchResultTemplate: '<div class="pl-1 pr-1 pl-sm-2 pr-sm-2 pl-lg-4 pr-lg-4 pl-xl-0 pr-xl-0"> <a href="{url}">{title}</a><div class="post-meta d-flex flex-column flex-sm-row text-muted mt-1 mb-1"> {categories} {tags}</div><p>{snippet}</p></div>', noResultsText: '<p class="mt-5">搜索结果为空</p>', templateMiddleware: function(prop, value, template) { if (prop === 'categories') { if (value === '') { return `${value}`; } else { return `<div class="mr-sm-4"><i class="far fa-folder fa-fw"></i>${value}</div>`; } } if (prop === 'tags') { if (value === '') { return `${value}`; } else { return `<div><i class="fa fa-tag fa-fw"></i>${value}</div>`; } } } }); </script> <script src="https://cdn.jsdelivr.net/combine/npm/magnific-popup@1/dist/jquery.magnific-popup.min.js,npm/lozad/dist/lozad.min.js,npm/clipboard@2/dist/clipboard.min.js"></script> <script src="https://cdn.jsdelivr.net/combine/npm/dayjs@1/dayjs.min.js,npm/dayjs@1/locale/asia/hangzhou.min.js,npm/dayjs@1/plugin/relativeTime.min.js,npm/dayjs@1/plugin/localizedFormat.min.js"></script> <script defer src="/assets/js/dist/post.min.js"></script> <script src="https://cdn.jsdelivr.net/npm/bootstrap@4/dist/js/bootstrap.bundle.min.js"></script> <script defer src="/app.js"></script>
